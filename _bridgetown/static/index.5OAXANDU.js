(()=>{var cb=Object.defineProperty;var vo=(b,t,e)=>t in b?cb(b,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):b[t]=e;var Yo=(b,t)=>{for(var e in t)cb(b,e,{get:t[e],enumerable:!0})};var g=(b,t,e)=>(vo(b,typeof t!="symbol"?t+"":t,e),e),ze=(b,t,e)=>{if(!t.has(b))throw TypeError("Cannot "+e)};var G=(b,t,e)=>(ze(b,t,"read from private field"),e?e.call(b):t.get(b)),Z=(b,t,e)=>{if(t.has(b))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(b):t.set(b,e)},u=(b,t,e,i)=>(ze(b,t,"write to private field"),i?i.call(b,e):t.set(b,e),e);var p=(b,t,e)=>(ze(b,t,"access private method"),e);(function(b){if(typeof b.requestSubmit=="function")return;b.requestSubmit=function(i){i?(t(i,this),i.click()):(i=document.createElement("input"),i.type="submit",i.hidden=!0,this.appendChild(i),i.click(),this.removeChild(i))};function t(i,o){i instanceof HTMLElement||e(TypeError,"parameter 1 is not of type 'HTMLElement'"),i.type=="submit"||e(TypeError,"The specified element is not a submit button"),i.form==o||e(DOMException,"The specified element is not owned by this form element","NotFoundError")}function e(i,o,a){throw new i("Failed to execute 'requestSubmit' on 'HTMLFormElement': "+o+".",a)}})(HTMLFormElement.prototype);var Zb=new WeakMap;function Qo(b){let t=b instanceof Element?b:b instanceof Node?b.parentElement:null,e=t?t.closest("input, button"):null;return e?.type=="submit"?e:null}function xo(b){let t=Qo(b.target);t&&t.form&&Zb.set(t.form,t)}(function(){if("submitter"in Event.prototype)return;let b=window.Event.prototype;if("SubmitEvent"in window){let t=window.SubmitEvent.prototype;if(/Apple Computer/.test(navigator.vendor)&&!("submitter"in t))b=t;else return}addEventListener("click",xo,!0),Object.defineProperty(b,"submitter",{get(){if(this.type=="submit"&&this.target instanceof HTMLFormElement)return Zb.get(this.target)}})})();var st={eager:"eager",lazy:"lazy"},de=class de extends HTMLElement{constructor(){super();g(this,"loaded",Promise.resolve());this.delegate=new de.delegateConstructor(this)}static get observedAttributes(){return["disabled","loading","src"]}connectedCallback(){this.delegate.connect()}disconnectedCallback(){this.delegate.disconnect()}reload(){return this.delegate.sourceURLReloaded()}attributeChangedCallback(e){e=="loading"?this.delegate.loadingStyleChanged():e=="src"?this.delegate.sourceURLChanged():e=="disabled"&&this.delegate.disabledChanged()}get src(){return this.getAttribute("src")}set src(e){e?this.setAttribute("src",e):this.removeAttribute("src")}get refresh(){return this.getAttribute("refresh")}set refresh(e){e?this.setAttribute("refresh",e):this.removeAttribute("refresh")}get shouldReloadWithMorph(){return this.src&&this.refresh==="morph"}get loading(){return Vo(this.getAttribute("loading")||"")}set loading(e){e?this.setAttribute("loading",e):this.removeAttribute("loading")}get disabled(){return this.hasAttribute("disabled")}set disabled(e){e?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get autoscroll(){return this.hasAttribute("autoscroll")}set autoscroll(e){e?this.setAttribute("autoscroll",""):this.removeAttribute("autoscroll")}get complete(){return!this.delegate.isLoading}get isActive(){return this.ownerDocument===document&&!this.isPreview}get isPreview(){return this.ownerDocument?.documentElement?.hasAttribute("data-turbo-preview")}};g(de,"delegateConstructor");var V=de;function Vo(b){switch(b.toLowerCase()){case"lazy":return st.lazy;default:return st.eager}}var Jo={enabled:!0,progressBarDelay:500,unvisitableExtensions:new Set([".7z",".aac",".apk",".avi",".bmp",".bz2",".css",".csv",".deb",".dmg",".doc",".docx",".exe",".gif",".gz",".heic",".heif",".ico",".iso",".jpeg",".jpg",".js",".json",".m4a",".mkv",".mov",".mp3",".mp4",".mpeg",".mpg",".msi",".ogg",".ogv",".pdf",".pkg",".png",".ppt",".pptx",".rar",".rtf",".svg",".tar",".tif",".tiff",".txt",".wav",".webm",".webp",".wma",".wmv",".xls",".xlsx",".xml",".zip"])};function At(b){if(b.getAttribute("data-turbo-eval")=="false")return b;{let t=document.createElement("script"),e=Wt("csp-nonce");return e&&(t.nonce=e),t.textContent=b.textContent,t.async=!1,ko(t,b),t}}function ko(b,t){for(let{name:e,value:i}of t.attributes)b.setAttribute(e,i)}function Lo(b){let t=document.createElement("template");return t.innerHTML=b,t.content}function W(b,{target:t,cancelable:e,detail:i}={}){let o=new CustomEvent(b,{cancelable:e,bubbles:!0,composed:!0,detail:i});return t&&t.isConnected?t.dispatchEvent(o):document.documentElement.dispatchEvent(o),o}function lb(b){b.preventDefault(),b.stopImmediatePropagation()}function Rt(){return document.visibilityState==="hidden"?pb():Gb()}function Gb(){return new Promise(b=>requestAnimationFrame(()=>b()))}function pb(){return new Promise(b=>setTimeout(()=>b(),0))}function Uo(){return Promise.resolve()}function Cb(b=""){return new DOMParser().parseFromString(b,"text/html")}function hb(b,...t){let e=Oo(b,t).replace(/^\n/,"").split(`
`),i=e[0].match(/^\s+/),o=i?i[0].length:0;return e.map(a=>a.slice(o)).join(`
`)}function Oo(b,t){return b.reduce((e,i,o)=>{let a=t[o]==null?"":t[o];return e+i+a},"")}function M(){return Array.from({length:36}).map((b,t)=>t==8||t==13||t==18||t==23?"-":t==14?"4":t==19?(Math.floor(Math.random()*4)+8).toString(16):Math.floor(Math.random()*15).toString(16)).join("")}function be(b,...t){for(let e of t.map(i=>i?.getAttribute(b)))if(typeof e=="string")return e;return null}function No(b,...t){return t.some(e=>e&&e.hasAttribute(b))}function oe(...b){for(let t of b)t.localName=="turbo-frame"&&t.setAttribute("busy",""),t.setAttribute("aria-busy","true")}function ae(...b){for(let t of b)t.localName=="turbo-frame"&&t.removeAttribute("busy"),t.removeAttribute("aria-busy")}function fo(b,t=2e3){return new Promise(e=>{let i=()=>{b.removeEventListener("error",i),b.removeEventListener("load",i),e()};b.addEventListener("load",i,{once:!0}),b.addEventListener("error",i,{once:!0}),setTimeout(e,t)})}function ub(b){switch(b){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}function Ho(b){return b=="advance"||b=="replace"||b=="restore"}function it(...b){let t=be("data-turbo-action",...b);return Ho(t)?t:null}function Wb(b){return document.querySelector(`meta[name="${b}"]`)}function Wt(b){let t=Wb(b);return t&&t.content}function wo(b,t){let e=Wb(b);return e||(e=document.createElement("meta"),e.setAttribute("name",b),document.head.appendChild(e)),e.setAttribute("content",t),e}function nt(b,t){if(b instanceof Element)return b.closest(t)||nt(b.assignedSlot||b.getRootNode()?.host,t)}function Xi(b){return!!b&&b.closest("[inert], :disabled, [hidden], details:not([open]), dialog:not([open])")==null&&typeof b.focus=="function"}function Bb(b){return Array.from(b.querySelectorAll("[autofocus]")).find(Xi)}async function So(b,t){let e=t();b(),await Gb();let i=t();return[e,i]}function Fb(b){if(b==="_blank")return!1;if(b){for(let t of document.getElementsByName(b))if(t instanceof HTMLIFrameElement)return!1;return!0}else return!0}function Xb(b){return nt(b,"a[href]:not([target^=_]):not([download])")}function yb(b){return A(b.getAttribute("href")||"")}function zo(b,t){let e=null;return(...i)=>{let o=()=>b.apply(this,i);clearTimeout(e),e=setTimeout(o,t)}}var jo={"aria-disabled":{beforeSubmit:b=>{b.setAttribute("aria-disabled","true"),b.addEventListener("click",lb)},afterSubmit:b=>{b.removeAttribute("aria-disabled"),b.removeEventListener("click",lb)}},disabled:{beforeSubmit:b=>b.disabled=!0,afterSubmit:b=>b.disabled=!1}},Jt,je=class{constructor(t){Z(this,Jt,null);Object.assign(this,t)}get submitter(){return G(this,Jt)}set submitter(t){u(this,Jt,jo[t]||t)}};Jt=new WeakMap;var To=new je({mode:"on",submitter:"disabled"}),R={drive:Jo,forms:To};function A(b){return new URL(b.toString(),document.baseURI)}function bt(b){let t;if(b.hash)return b.hash.slice(1);if(t=b.href.match(/#(.*)$/))return t[1]}function yi(b,t){let e=t?.getAttribute("formaction")||b.getAttribute("action")||b.action;return A(e)}function Eo(b){return(Po(b).match(/\.[^.]*$/)||[])[0]||""}function Do(b,t){let e=qo(t);return b.href===A(e).href||b.href.startsWith(e)}function S(b,t){return Do(b,t)&&!R.drive.unvisitableExtensions.has(Eo(b))}function Te(b){let t=bt(b);return t!=null?b.href.slice(0,-(t.length+1)):b.href}function qt(b){return Te(b)}function Mo(b,t){return A(b).href==A(t).href}function Ko(b){return b.pathname.split("/").slice(1)}function Po(b){return Ko(b).slice(-1)[0]}function qo(b){return $o(b.origin+b.pathname)}function $o(b){return b.endsWith("/")?b:b+"/"}var vt=class{constructor(t){this.response=t}get succeeded(){return this.response.ok}get failed(){return!this.succeeded}get clientError(){return this.statusCode>=400&&this.statusCode<=499}get serverError(){return this.statusCode>=500&&this.statusCode<=599}get redirected(){return this.response.redirected}get location(){return A(this.response.url)}get isHTML(){return this.contentType&&this.contentType.match(/^(?:text\/([^\s;,]+\b)?html|application\/xhtml\+xml)\b/)}get statusCode(){return this.response.status}get contentType(){return this.header("Content-Type")}get responseText(){return this.response.clone().text()}get responseHTML(){return this.isHTML?this.response.clone().text():Promise.resolve(void 0)}header(t){return this.response.headers.get(t)}},Ee=class extends Set{constructor(t){super(),this.maxSize=t}add(t){if(this.size>=this.maxSize){let i=this.values().next().value;this.delete(i)}super.add(t)}},Rb=new Ee(20),_o=window.fetch;function Ab(b,t={}){let e=new Headers(t.headers||{}),i=M();return Rb.add(i),e.append("X-Turbo-Request-Id",i),_o(b,{...t,headers:e})}function Ri(b){switch(b.toLowerCase()){case"get":return Q.get;case"post":return Q.post;case"put":return Q.put;case"patch":return Q.patch;case"delete":return Q.delete}}var Q={get:"get",post:"post",put:"put",patch:"patch",delete:"delete"};function ta(b){switch(b.toLowerCase()){case _.multipart:return _.multipart;case _.plain:return _.plain;default:return _.urlEncoded}}var _={urlEncoded:"application/x-www-form-urlencoded",multipart:"multipart/form-data",plain:"text/plain"},kt,me,vb,Ie,Yb,ot=class{constructor(t,e,i,o=new URLSearchParams,a=null,s=_.urlEncoded){Z(this,me);Z(this,Ie);g(this,"abortController",new AbortController);Z(this,kt,t=>{});let[m,h]=sb(A(i),e,o,s);this.delegate=t,this.url=m,this.target=a,this.fetchOptions={credentials:"same-origin",redirect:"follow",method:e.toUpperCase(),headers:{...this.defaultHeaders},body:h,signal:this.abortSignal,referrer:this.delegate.referrer?.href},this.enctype=s}get method(){return this.fetchOptions.method}set method(t){let e=this.isSafe?this.url.searchParams:this.fetchOptions.body||new FormData,i=Ri(t)||Q.get;this.url.search="";let[o,a]=sb(this.url,i,e,this.enctype);this.url=o,this.fetchOptions.body=a,this.fetchOptions.method=i.toUpperCase()}get headers(){return this.fetchOptions.headers}set headers(t){this.fetchOptions.headers=t}get body(){return this.isSafe?this.url.searchParams:this.fetchOptions.body}set body(t){this.fetchOptions.body=t}get location(){return this.url}get params(){return this.url.searchParams}get entries(){return this.body?Array.from(this.body.entries()):[]}cancel(){this.abortController.abort()}async perform(){let{fetchOptions:t}=this;this.delegate.prepareRequest(this);let e=await p(this,me,vb).call(this,t);try{this.delegate.requestStarted(this),e.detail.fetchRequest?this.response=e.detail.fetchRequest.response:this.response=Ab(this.url.href,t);let i=await this.response;return await this.receive(i)}catch(i){if(i.name!=="AbortError")throw p(this,Ie,Yb).call(this,i)&&this.delegate.requestErrored(this,i),i}finally{this.delegate.requestFinished(this)}}async receive(t){let e=new vt(t);return W("turbo:before-fetch-response",{cancelable:!0,detail:{fetchResponse:e},target:this.target}).defaultPrevented?this.delegate.requestPreventedHandlingResponse(this,e):e.succeeded?this.delegate.requestSucceededWithResponse(this,e):this.delegate.requestFailedWithResponse(this,e),e}get defaultHeaders(){return{Accept:"text/html, application/xhtml+xml"}}get isSafe(){return Ai(this.method)}get abortSignal(){return this.abortController.signal}acceptResponseType(t){this.headers.Accept=[t,this.headers.Accept].join(", ")}};kt=new WeakMap,me=new WeakSet,vb=async function(t){let e=new Promise(o=>u(this,kt,o)),i=W("turbo:before-fetch-request",{cancelable:!0,detail:{fetchOptions:t,url:this.url,resume:G(this,kt)},target:this.target});return this.url=i.detail.url,i.defaultPrevented&&await e,i},Ie=new WeakSet,Yb=function(t){return!W("turbo:fetch-request-error",{target:this.target,cancelable:!0,detail:{request:this,error:t}}).defaultPrevented};function Ai(b){return Ri(b)==Q.get}function sb(b,t,e,i){let o=Array.from(e).length>0?new URLSearchParams(Qb(e)):b.searchParams;return Ai(t)?[ea(b,o),null]:i==_.urlEncoded?[b,o]:[b,e]}function Qb(b){let t=[];for(let[e,i]of b)i instanceof File||t.push([e,i]);return t}function ea(b,t){let e=new URLSearchParams(Qb(t));return b.search=e.toString(),b}var De=class{constructor(t,e){g(this,"started",!1);g(this,"intersect",t=>{t.slice(-1)[0]?.isIntersecting&&this.delegate.elementAppearedInViewport(this.element)});this.delegate=t,this.element=e,this.intersectionObserver=new IntersectionObserver(this.intersect)}start(){this.started||(this.started=!0,this.intersectionObserver.observe(this.element))}stop(){this.started&&(this.started=!1,this.intersectionObserver.unobserve(this.element))}},f=class{static wrap(t){return typeof t=="string"?new this(Lo(t)):t}constructor(t){this.fragment=ia(t)}};g(f,"contentType","text/vnd.turbo-stream.html");function ia(b){for(let t of b.querySelectorAll("turbo-stream")){let e=document.importNode(t,!0);for(let i of e.templateElement.content.querySelectorAll("script"))i.replaceWith(At(i));t.replaceWith(e)}return b}var ba=100,tt,O,Me=class{constructor(){Z(this,tt,null);Z(this,O,null)}get(t){if(G(this,O)&&G(this,O).url===t&&G(this,O).expire>Date.now())return G(this,O).request}setLater(t,e,i){this.clear(),u(this,tt,setTimeout(()=>{e.perform(),this.set(t,e,i),u(this,tt,null)},ba))}set(t,e,i){u(this,O,{url:t,request:e,expire:new Date(new Date().getTime()+i)})}clear(){G(this,tt)&&clearTimeout(G(this,tt)),u(this,O,null)}};tt=new WeakMap,O=new WeakMap;var oa=10*1e3,gt=new Me,rt={initialized:"initialized",requesting:"requesting",waiting:"waiting",receiving:"receiving",stopping:"stopping",stopped:"stopped"},re=class b{constructor(t,e,i,o=!1){g(this,"state",rt.initialized);let a=ga(e,i),s=sa(la(e,i),a),m=aa(e,i),h=na(e,i);this.delegate=t,this.formElement=e,this.submitter=i,this.fetchRequest=new ot(this,a,s,m,e,h),this.mustRedirect=o}static confirmMethod(t){return Promise.resolve(confirm(t))}get method(){return this.fetchRequest.method}set method(t){this.fetchRequest.method=t}get action(){return this.fetchRequest.url.toString()}set action(t){this.fetchRequest.url=A(t)}get body(){return this.fetchRequest.body}get enctype(){return this.fetchRequest.enctype}get isSafe(){return this.fetchRequest.isSafe}get location(){return this.fetchRequest.url}async start(){let{initialized:t,requesting:e}=rt,i=be("data-turbo-confirm",this.submitter,this.formElement);if(!(typeof i=="string"&&!await(typeof R.forms.confirm=="function"?R.forms.confirm:b.confirmMethod)(i,this.formElement,this.submitter))&&this.state==t)return this.state=e,this.fetchRequest.perform()}stop(){let{stopping:t,stopped:e}=rt;if(this.state!=t&&this.state!=e)return this.state=t,this.fetchRequest.cancel(),!0}prepareRequest(t){if(!t.isSafe){let e=ra(Wt("csrf-param"))||Wt("csrf-token");e&&(t.headers["X-CSRF-Token"]=e)}this.requestAcceptsTurboStreamResponse(t)&&t.acceptResponseType(f.contentType)}requestStarted(t){this.state=rt.waiting,this.submitter&&R.forms.submitter.beforeSubmit(this.submitter),this.setSubmitsWith(),oe(this.formElement),W("turbo:submit-start",{target:this.formElement,detail:{formSubmission:this}}),this.delegate.formSubmissionStarted(this)}requestPreventedHandlingResponse(t,e){gt.clear(),this.result={success:e.succeeded,fetchResponse:e}}requestSucceededWithResponse(t,e){if(e.clientError||e.serverError){this.delegate.formSubmissionFailedWithResponse(this,e);return}if(gt.clear(),this.requestMustRedirect(t)&&ca(e)){let i=new Error("Form responses must redirect to another location");this.delegate.formSubmissionErrored(this,i)}else this.state=rt.receiving,this.result={success:!0,fetchResponse:e},this.delegate.formSubmissionSucceededWithResponse(this,e)}requestFailedWithResponse(t,e){this.result={success:!1,fetchResponse:e},this.delegate.formSubmissionFailedWithResponse(this,e)}requestErrored(t,e){this.result={success:!1,error:e},this.delegate.formSubmissionErrored(this,e)}requestFinished(t){this.state=rt.stopped,this.submitter&&R.forms.submitter.afterSubmit(this.submitter),this.resetSubmitterText(),ae(this.formElement),W("turbo:submit-end",{target:this.formElement,detail:{formSubmission:this,...this.result}}),this.delegate.formSubmissionFinished(this)}setSubmitsWith(){if(!(!this.submitter||!this.submitsWith)){if(this.submitter.matches("button"))this.originalSubmitText=this.submitter.innerHTML,this.submitter.innerHTML=this.submitsWith;else if(this.submitter.matches("input")){let t=this.submitter;this.originalSubmitText=t.value,t.value=this.submitsWith}}}resetSubmitterText(){if(!(!this.submitter||!this.originalSubmitText)){if(this.submitter.matches("button"))this.submitter.innerHTML=this.originalSubmitText;else if(this.submitter.matches("input")){let t=this.submitter;t.value=this.originalSubmitText}}}requestMustRedirect(t){return!t.isSafe&&this.mustRedirect}requestAcceptsTurboStreamResponse(t){return!t.isSafe||No("data-turbo-stream",this.submitter,this.formElement)}get submitsWith(){return this.submitter?.getAttribute("data-turbo-submits-with")}};function aa(b,t){let e=new FormData(b),i=t?.getAttribute("name"),o=t?.getAttribute("value");return i&&e.append(i,o||""),e}function ra(b){if(b!=null){let e=(document.cookie?document.cookie.split("; "):[]).find(i=>i.startsWith(b));if(e){let i=e.split("=").slice(1).join("=");return i?decodeURIComponent(i):void 0}}}function ca(b){return b.statusCode==200&&!b.redirected}function la(b,t){let e=typeof b.action=="string"?b.action:null;return t?.hasAttribute("formaction")?t.getAttribute("formaction")||"":b.getAttribute("action")||e||""}function sa(b,t){let e=A(b);return Ai(t)&&(e.search=""),e}function ga(b,t){let e=t?.getAttribute("formmethod")||b.getAttribute("method")||"";return Ri(e.toLowerCase())||Q.get}function na(b,t){return ta(t?.getAttribute("formenctype")||b.enctype)}var Bt=class{constructor(t){this.element=t}get activeElement(){return this.element.ownerDocument.activeElement}get children(){return[...this.element.children]}hasAnchor(t){return this.getElementForAnchor(t)!=null}getElementForAnchor(t){return t?this.element.querySelector(`[id='${t}'], a[name='${t}']`):null}get isConnected(){return this.element.isConnected}get firstAutofocusableElement(){return Bb(this.element)}get permanentElements(){return Vb(this.element)}getPermanentElementById(t){return xb(this.element,t)}getPermanentElementMapForSnapshot(t){let e={};for(let i of this.permanentElements){let{id:o}=i,a=t.getPermanentElementById(o);a&&(e[o]=[i,a])}return e}};function xb(b,t){return b.querySelector(`#${t}[data-turbo-permanent]`)}function Vb(b){return b.querySelectorAll("[id][data-turbo-permanent]")}var Yt=class{constructor(t,e){g(this,"started",!1);g(this,"submitCaptured",()=>{this.eventTarget.removeEventListener("submit",this.submitBubbled,!1),this.eventTarget.addEventListener("submit",this.submitBubbled,!1)});g(this,"submitBubbled",t=>{if(!t.defaultPrevented){let e=t.target instanceof HTMLFormElement?t.target:void 0,i=t.submitter||void 0;e&&da(e,i)&&ma(e,i)&&this.delegate.willSubmitForm(e,i)&&(t.preventDefault(),t.stopImmediatePropagation(),this.delegate.formSubmitted(e,i))}});this.delegate=t,this.eventTarget=e}start(){this.started||(this.eventTarget.addEventListener("submit",this.submitCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("submit",this.submitCaptured,!0),this.started=!1)}};function da(b,t){return(t?.getAttribute("formmethod")||b.getAttribute("method"))!="dialog"}function ma(b,t){let e=t?.getAttribute("formtarget")||b.getAttribute("target");return Fb(e)}var Lt,Ut,ce=class{constructor(t,e){Z(this,Lt,t=>{});Z(this,Ut,t=>{});this.delegate=t,this.element=e}scrollToAnchor(t){let e=this.snapshot.getElementForAnchor(t);e?(this.scrollToElement(e),this.focusElement(e)):this.scrollToPosition({x:0,y:0})}scrollToAnchorFromLocation(t){this.scrollToAnchor(bt(t))}scrollToElement(t){t.scrollIntoView()}focusElement(t){t instanceof HTMLElement&&(t.hasAttribute("tabindex")?t.focus():(t.setAttribute("tabindex","-1"),t.focus(),t.removeAttribute("tabindex")))}scrollToPosition({x:t,y:e}){this.scrollRoot.scrollTo(t,e)}scrollToTop(){this.scrollToPosition({x:0,y:0})}get scrollRoot(){return window}async render(t){let{isPreview:e,shouldRender:i,willRender:o,newSnapshot:a}=t,s=o;if(i)try{this.renderPromise=new Promise(v=>u(this,Lt,v)),this.renderer=t,await this.prepareToRenderSnapshot(t);let m=new Promise(v=>u(this,Ut,v)),h={resume:G(this,Ut),render:this.renderer.renderElement,renderMethod:this.renderer.renderMethod};this.delegate.allowsImmediateRender(a,h)||await m,await this.renderSnapshot(t),this.delegate.viewRenderedSnapshot(a,e,this.renderer.renderMethod),this.delegate.preloadOnLoadLinksForView(this.element),this.finishRenderingSnapshot(t)}finally{delete this.renderer,G(this,Lt).call(this,void 0),delete this.renderPromise}else s&&this.invalidate(t.reloadReason)}invalidate(t){this.delegate.viewInvalidated(t)}async prepareToRenderSnapshot(t){this.markAsPreview(t.isPreview),await t.prepareToRender()}markAsPreview(t){t?this.element.setAttribute("data-turbo-preview",""):this.element.removeAttribute("data-turbo-preview")}markVisitDirection(t){this.element.setAttribute("data-turbo-visit-direction",t)}unmarkVisitDirection(){this.element.removeAttribute("data-turbo-visit-direction")}async renderSnapshot(t){await t.render()}finishRenderingSnapshot(t){t.finishRendering()}};Lt=new WeakMap,Ut=new WeakMap;var Ke=class extends ce{missing(){this.element.innerHTML='<strong class="turbo-frame-error">Content missing</strong>'}get snapshot(){return new Bt(this.element)}},le=class{constructor(t,e){g(this,"clickBubbled",t=>{this.clickEventIsSignificant(t)?this.clickEvent=t:delete this.clickEvent});g(this,"linkClicked",t=>{this.clickEvent&&this.clickEventIsSignificant(t)&&this.delegate.shouldInterceptLinkClick(t.target,t.detail.url,t.detail.originalEvent)&&(this.clickEvent.preventDefault(),t.preventDefault(),this.delegate.linkClickIntercepted(t.target,t.detail.url,t.detail.originalEvent)),delete this.clickEvent});g(this,"willVisit",t=>{delete this.clickEvent});this.delegate=t,this.element=e}start(){this.element.addEventListener("click",this.clickBubbled),document.addEventListener("turbo:click",this.linkClicked),document.addEventListener("turbo:before-visit",this.willVisit)}stop(){this.element.removeEventListener("click",this.clickBubbled),document.removeEventListener("turbo:click",this.linkClicked),document.removeEventListener("turbo:before-visit",this.willVisit)}clickEventIsSignificant(t){let e=t.composed?t.target?.parentElement:t.target,i=Xb(e)||e;return i instanceof Element&&i.closest("turbo-frame, html")==this.element}},se=class{constructor(t,e){g(this,"started",!1);g(this,"clickCaptured",()=>{this.eventTarget.removeEventListener("click",this.clickBubbled,!1),this.eventTarget.addEventListener("click",this.clickBubbled,!1)});g(this,"clickBubbled",t=>{if(t instanceof MouseEvent&&this.clickEventIsSignificant(t)){let e=t.composedPath&&t.composedPath()[0]||t.target,i=Xb(e);if(i&&Fb(i.target)){let o=yb(i);this.delegate.willFollowLinkToLocation(i,o,t)&&(t.preventDefault(),this.delegate.followedLinkToLocation(i,o))}}});this.delegate=t,this.eventTarget=e}start(){this.started||(this.eventTarget.addEventListener("click",this.clickCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("click",this.clickCaptured,!0),this.started=!1)}clickEventIsSignificant(t){return!(t.target&&t.target.isContentEditable||t.defaultPrevented||t.which>1||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)}},ge=class{constructor(t,e){this.delegate=t,this.linkInterceptor=new se(this,e)}start(){this.linkInterceptor.start()}stop(){this.linkInterceptor.stop()}canPrefetchRequestToLocation(t,e){return!1}prefetchAndCacheRequestToLocation(t,e){}willFollowLinkToLocation(t,e,i){return this.delegate.willSubmitFormLinkToLocation(t,e,i)&&(t.hasAttribute("data-turbo-method")||t.hasAttribute("data-turbo-stream"))}followedLinkToLocation(t,e){let i=document.createElement("form"),o="hidden";for(let[w,Y]of e.searchParams)i.append(Object.assign(document.createElement("input"),{type:o,name:w,value:Y}));let a=Object.assign(e,{search:""});i.setAttribute("data-turbo","true"),i.setAttribute("action",a.href),i.setAttribute("hidden","");let s=t.getAttribute("data-turbo-method");s&&i.setAttribute("method",s);let m=t.getAttribute("data-turbo-frame");m&&i.setAttribute("data-turbo-frame",m);let h=it(t);h&&i.setAttribute("data-turbo-action",h);let F=t.getAttribute("data-turbo-confirm");F&&i.setAttribute("data-turbo-confirm",F),t.hasAttribute("data-turbo-stream")&&i.setAttribute("data-turbo-stream",""),this.delegate.submittedFormLinkToLocation(t,e,i),document.body.appendChild(i),i.addEventListener("turbo:submit-end",()=>i.remove(),{once:!0}),requestAnimationFrame(()=>i.requestSubmit())}},ne=class{static async preservingPermanentElements(t,e,i){let o=new this(t,e);o.enter(),await i(),o.leave()}constructor(t,e){this.delegate=t,this.permanentElementMap=e}enter(){for(let t in this.permanentElementMap){let[e,i]=this.permanentElementMap[t];this.delegate.enteringBardo(e,i),this.replaceNewPermanentElementWithPlaceholder(i)}}leave(){for(let t in this.permanentElementMap){let[e]=this.permanentElementMap[t];this.replaceCurrentPermanentElementWithClone(e),this.replacePlaceholderWithPermanentElement(e),this.delegate.leavingBardo(e)}}replaceNewPermanentElementWithPlaceholder(t){let e=Ia(t);t.replaceWith(e)}replaceCurrentPermanentElementWithClone(t){let e=t.cloneNode(!0);t.replaceWith(e)}replacePlaceholderWithPermanentElement(t){this.getPlaceholderById(t.id)?.replaceWith(t)}getPlaceholderById(t){return this.placeholders.find(e=>e.content==t)}get placeholders(){return[...document.querySelectorAll("meta[name=turbo-permanent-placeholder][content]")]}};function Ia(b){let t=document.createElement("meta");return t.setAttribute("name","turbo-permanent-placeholder"),t.setAttribute("content",b.id),t}var N,Qt=class{constructor(t,e,i,o=!0){Z(this,N,null);this.currentSnapshot=t,this.newSnapshot=e,this.isPreview=i,this.willRender=o,this.renderElement=this.constructor.renderElement,this.promise=new Promise((a,s)=>this.resolvingFunctions={resolve:a,reject:s})}static renderElement(t,e){}get shouldRender(){return!0}get shouldAutofocus(){return!0}get reloadReason(){}prepareToRender(){}render(){}finishRendering(){this.resolvingFunctions&&(this.resolvingFunctions.resolve(),delete this.resolvingFunctions)}async preservingPermanentElements(t){await ne.preservingPermanentElements(this,this.permanentElementMap,t)}focusFirstAutofocusableElement(){if(this.shouldAutofocus){let t=this.connectedSnapshot.firstAutofocusableElement;t&&t.focus()}}enteringBardo(t){G(this,N)||t.contains(this.currentSnapshot.activeElement)&&u(this,N,this.currentSnapshot.activeElement)}leavingBardo(t){t.contains(G(this,N))&&G(this,N)instanceof HTMLElement&&(G(this,N).focus(),u(this,N,null))}get connectedSnapshot(){return this.newSnapshot.isConnected?this.newSnapshot:this.currentSnapshot}get currentElement(){return this.currentSnapshot.element}get newElement(){return this.newSnapshot.element}get permanentElementMap(){return this.currentSnapshot.getPermanentElementMapForSnapshot(this.newSnapshot)}get renderMethod(){return"replace"}};N=new WeakMap;var xt=class extends Qt{static renderElement(t,e){let i=document.createRange();i.selectNodeContents(t),i.deleteContents();let o=e,a=o.ownerDocument?.createRange();a&&(a.selectNodeContents(o),t.appendChild(a.extractContents()))}constructor(t,e,i,o,a,s=!0){super(e,i,o,a,s),this.delegate=t}get shouldRender(){return!0}async render(){await Rt(),this.preservingPermanentElements(()=>{this.loadFrameElement()}),this.scrollFrameIntoView(),await Rt(),this.focusFirstAutofocusableElement(),await Rt(),this.activateScriptElements()}loadFrameElement(){this.delegate.willRenderFrame(this.currentElement,this.newElement),this.renderElement(this.currentElement,this.newElement)}scrollFrameIntoView(){if(this.currentElement.autoscroll||this.newElement.autoscroll){let t=this.currentElement.firstElementChild,e=Za(this.currentElement.getAttribute("data-autoscroll-block"),"end"),i=Ga(this.currentElement.getAttribute("data-autoscroll-behavior"),"auto");if(t)return t.scrollIntoView({block:e,behavior:i}),!0}return!1}activateScriptElements(){for(let t of this.newScriptElements){let e=At(t);t.replaceWith(e)}}get newScriptElements(){return this.currentElement.querySelectorAll("script")}};function Za(b,t){return b=="end"||b=="start"||b=="center"||b=="nearest"?b:t}function Ga(b,t){return b=="auto"||b=="smooth"?b:t}var pa=function(){let b=new Set,t={morphStyle:"outerHTML",callbacks:{beforeNodeAdded:Y,afterNodeAdded:Y,beforeNodeMorphed:Y,afterNodeMorphed:Y,beforeNodeRemoved:Y,afterNodeRemoved:Y,beforeAttributeUpdated:Y},head:{style:"merge",shouldPreserve:function(r){return r.getAttribute("im-preserve")==="true"},shouldReAppend:function(r){return r.getAttribute("im-re-append")==="true"},shouldRemove:Y,afterHeadMorphed:Y}};function e(r,c,l={}){r instanceof Document&&(r=r.documentElement),typeof c=="string"&&(c=ho(c));let n=uo(c),d=we(r,n,l);return i(r,n,d)}function i(r,c,l){if(l.head.block){let n=r.querySelector("head"),d=c.querySelector("head");if(n&&d){let I=w(d,n,l);Promise.all(I).then(function(){i(r,c,Object.assign(l,{head:{block:!1,ignore:!0}}))});return}}if(l.morphStyle==="innerHTML")return s(c,r,l),r.children;if(l.morphStyle==="outerHTML"||l.morphStyle==null){let n=Bo(c,r,l),d=n?.previousSibling,I=n?.nextSibling,C=a(r,n,l);return n?Wo(d,C,I):[]}else throw"Do not understand how to morph style "+l.morphStyle}function o(r,c){return c.ignoreActiveValue&&r===document.activeElement&&r!==document.body}function a(r,c,l){if(!(l.ignoreActive&&r===document.activeElement))return c==null?l.callbacks.beforeNodeRemoved(r)===!1?r:(r.remove(),l.callbacks.afterNodeRemoved(r),null):at(r,c)?(l.callbacks.beforeNodeMorphed(r,c)===!1||(r instanceof HTMLHeadElement&&l.head.ignore||(r instanceof HTMLHeadElement&&l.head.style!=="morph"?w(c,r,l):(h(c,r,l),o(r,l)||s(c,r,l))),l.callbacks.afterNodeMorphed(r,c)),r):l.callbacks.beforeNodeRemoved(r)===!1||l.callbacks.beforeNodeAdded(c)===!1?r:(r.parentElement.replaceChild(c,r),l.callbacks.afterNodeAdded(c),l.callbacks.afterNodeRemoved(r),c)}function s(r,c,l){let n=r.firstChild,d=c.firstChild,I;for(;n;){if(I=n,n=I.nextSibling,d==null){if(l.callbacks.beforeNodeAdded(I)===!1)return;c.appendChild(I),l.callbacks.afterNodeAdded(I),P(l,I);continue}if(Pt(I,d,l)){a(d,I,l),d=d.nextSibling,P(l,I);continue}let C=po(r,c,I,d,l);if(C){d=bb(d,C,l),a(C,I,l),P(l,I);continue}let X=Co(r,c,I,d,l);if(X){d=bb(d,X,l),a(X,I,l),P(l,I);continue}if(l.callbacks.beforeNodeAdded(I)===!1)return;c.insertBefore(I,d),l.callbacks.afterNodeAdded(I),P(l,I)}for(;d!==null;){let C=d;d=d.nextSibling,ob(C,l)}}function m(r,c,l,n){return r==="value"&&n.ignoreActiveValue&&c===document.activeElement?!0:n.callbacks.beforeAttributeUpdated(r,c,l)===!1}function h(r,c,l){let n=r.nodeType;if(n===1){let d=r.attributes,I=c.attributes;for(let C of d)m(C.name,c,"update",l)||c.getAttribute(C.name)!==C.value&&c.setAttribute(C.name,C.value);for(let C=I.length-1;0<=C;C--){let X=I[C];m(X.name,c,"remove",l)||r.hasAttribute(X.name)||c.removeAttribute(X.name)}}(n===8||n===3)&&c.nodeValue!==r.nodeValue&&(c.nodeValue=r.nodeValue),o(c,l)||v(r,c,l)}function F(r,c,l,n){if(r[l]!==c[l]){let d=m(l,c,"update",n);d||(c[l]=r[l]),r[l]?d||c.setAttribute(l,r[l]):m(l,c,"remove",n)||c.removeAttribute(l)}}function v(r,c,l){if(r instanceof HTMLInputElement&&c instanceof HTMLInputElement&&r.type!=="file"){let n=r.value,d=c.value;F(r,c,"checked",l),F(r,c,"disabled",l),r.hasAttribute("value")?n!==d&&(m("value",c,"update",l)||(c.setAttribute("value",n),c.value=n)):m("value",c,"remove",l)||(c.value="",c.removeAttribute("value"))}else if(r instanceof HTMLOptionElement)F(r,c,"selected",l);else if(r instanceof HTMLTextAreaElement&&c instanceof HTMLTextAreaElement){let n=r.value,d=c.value;if(m("value",c,"update",l))return;n!==d&&(c.value=n),c.firstChild&&c.firstChild.nodeValue!==n&&(c.firstChild.nodeValue=n)}}function w(r,c,l){let n=[],d=[],I=[],C=[],X=l.head.style,q=new Map;for(let y of r.children)q.set(y.outerHTML,y);for(let y of c.children){let k=q.has(y.outerHTML),Xt=l.head.shouldReAppend(y),Se=l.head.shouldPreserve(y);k||Se?Xt?d.push(y):(q.delete(y.outerHTML),I.push(y)):X==="append"?Xt&&(d.push(y),C.push(y)):l.head.shouldRemove(y)!==!1&&d.push(y)}C.push(...q.values());let rb=[];for(let y of C){let k=document.createRange().createContextualFragment(y.outerHTML).firstChild;if(l.callbacks.beforeNodeAdded(k)!==!1){if(k.href||k.src){let Xt=null,Se=new Promise(function(Ao){Xt=Ao});k.addEventListener("load",function(){Xt()}),rb.push(Se)}c.appendChild(k),l.callbacks.afterNodeAdded(k),n.push(k)}}for(let y of d)l.callbacks.beforeNodeRemoved(y)!==!1&&(c.removeChild(y),l.callbacks.afterNodeRemoved(y));return l.head.afterHeadMorphed(c,{added:n,kept:I,removed:d}),rb}function Y(){}function He(r){let c={};return Object.assign(c,t),Object.assign(c,r),c.callbacks={},Object.assign(c.callbacks,t.callbacks),Object.assign(c.callbacks,r.callbacks),c.head={},Object.assign(c.head,t.head),Object.assign(c.head,r.head),c}function we(r,c,l){return l=He(l),{target:r,newContent:c,config:l,morphStyle:l.morphStyle,ignoreActive:l.ignoreActive,ignoreActiveValue:l.ignoreActiveValue,idMap:Ro(r,c),deadIds:new Set,callbacks:l.callbacks,head:l.head}}function Pt(r,c,l){return r==null||c==null?!1:r.nodeType===c.nodeType&&r.tagName===c.tagName?r.id!==""&&r.id===c.id?!0:Ft(l,r,c)>0:!1}function at(r,c){return r==null||c==null?!1:r.nodeType===c.nodeType&&r.tagName===c.tagName}function bb(r,c,l){for(;r!==c;){let n=r;r=r.nextSibling,ob(n,l)}return P(l,c),c.nextSibling}function po(r,c,l,n,d){let I=Ft(d,l,c),C=null;if(I>0){let X=n,q=0;for(;X!=null;){if(Pt(l,X,d))return X;if(q+=Ft(d,X,r),q>I)return null;X=X.nextSibling}}return C}function Co(r,c,l,n,d){let I=n,C=l.nextSibling,X=0;for(;I!=null;){if(Ft(d,I,r)>0)return null;if(at(l,I))return I;if(at(C,I)&&(X++,C=C.nextSibling,X>=2))return null;I=I.nextSibling}return I}function ho(r){let c=new DOMParser,l=r.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(l.match(/<\/html>/)||l.match(/<\/head>/)||l.match(/<\/body>/)){let n=c.parseFromString(r,"text/html");if(l.match(/<\/html>/))return n.generatedByIdiomorph=!0,n;{let d=n.firstChild;return d?(d.generatedByIdiomorph=!0,d):null}}else{let d=c.parseFromString("<body><template>"+r+"</template></body>","text/html").body.querySelector("template").content;return d.generatedByIdiomorph=!0,d}}function uo(r){if(r==null)return document.createElement("div");if(r.generatedByIdiomorph)return r;if(r instanceof Node){let c=document.createElement("div");return c.append(r),c}else{let c=document.createElement("div");for(let l of[...r])c.append(l);return c}}function Wo(r,c,l){let n=[],d=[];for(;r!=null;)n.push(r),r=r.previousSibling;for(;n.length>0;){let I=n.pop();d.push(I),c.parentElement.insertBefore(I,c)}for(d.push(c);l!=null;)n.push(l),d.push(l),l=l.nextSibling;for(;n.length>0;)c.parentElement.insertBefore(n.pop(),c.nextSibling);return d}function Bo(r,c,l){let n;n=r.firstChild;let d=n,I=0;for(;n;){let C=Fo(n,c,l);C>I&&(d=n,I=C),n=n.nextSibling}return d}function Fo(r,c,l){return at(r,c)?.5+Ft(l,r,c):0}function ob(r,c){P(c,r),c.callbacks.beforeNodeRemoved(r)!==!1&&(r.remove(),c.callbacks.afterNodeRemoved(r))}function Xo(r,c){return!r.deadIds.has(c)}function yo(r,c,l){return(r.idMap.get(l)||b).has(c)}function P(r,c){let l=r.idMap.get(c)||b;for(let n of l)r.deadIds.add(n)}function Ft(r,c,l){let n=r.idMap.get(c)||b,d=0;for(let I of n)Xo(r,I)&&yo(r,I,l)&&++d;return d}function ab(r,c){let l=r.parentElement,n=r.querySelectorAll("[id]");for(let d of n){let I=d;for(;I!==l&&I!=null;){let C=c.get(I);C==null&&(C=new Set,c.set(I,C)),C.add(d.id),I=I.parentElement}}}function Ro(r,c){let l=new Map;return ab(r,l),ab(c,l),l}return{morph:e,defaults:t}}();function vi(b,t,{callbacks:e,...i}={}){pa.morph(b,t,{...i,callbacks:new Pe(e)})}function Jb(b,t){vi(b,t.children,{morphStyle:"innerHTML"})}var Ot,Pe=class{constructor({beforeNodeMorphed:t}={}){Z(this,Ot,void 0);g(this,"beforeNodeAdded",t=>!(t.id&&t.hasAttribute("data-turbo-permanent")&&document.getElementById(t.id)));g(this,"beforeNodeMorphed",(t,e)=>{if(t instanceof Element)return!t.hasAttribute("data-turbo-permanent")&&G(this,Ot).call(this,t,e)?!W("turbo:before-morph-element",{cancelable:!0,target:t,detail:{currentElement:t,newElement:e}}).defaultPrevented:!1});g(this,"beforeAttributeUpdated",(t,e,i)=>!W("turbo:before-morph-attribute",{cancelable:!0,target:e,detail:{attributeName:t,mutationType:i}}).defaultPrevented);g(this,"beforeNodeRemoved",t=>this.beforeNodeMorphed(t));g(this,"afterNodeMorphed",(t,e)=>{t instanceof Element&&W("turbo:morph-element",{target:t,detail:{currentElement:t,newElement:e}})});u(this,Ot,t||(()=>!0))}};Ot=new WeakMap;var qe=class extends xt{static renderElement(t,e){W("turbo:before-frame-morph",{target:t,detail:{currentElement:t,newElement:e}}),Jb(t,e)}async preservingPermanentElements(t){return await t()}},U=class U{constructor(){g(this,"hiding",!1);g(this,"value",0);g(this,"visible",!1);g(this,"trickle",()=>{this.setValue(this.value+Math.random()/100)});this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement(),this.installStylesheetElement(),this.setValue(0)}static get defaultCSS(){return hb`
      .turbo-progress-bar {
        position: fixed;
        display: block;
        top: 0;
        left: 0;
        height: 3px;
        background: #0076ff;
        z-index: 2147483647;
        transition:
          width ${U.animationDuration}ms ease-out,
          opacity ${U.animationDuration/2}ms ${U.animationDuration/2}ms ease-in;
        transform: translate3d(0, 0, 0);
      }
    `}show(){this.visible||(this.visible=!0,this.installProgressElement(),this.startTrickling())}hide(){this.visible&&!this.hiding&&(this.hiding=!0,this.fadeProgressElement(()=>{this.uninstallProgressElement(),this.stopTrickling(),this.visible=!1,this.hiding=!1}))}setValue(t){this.value=t,this.refresh()}installStylesheetElement(){document.head.insertBefore(this.stylesheetElement,document.head.firstChild)}installProgressElement(){this.progressElement.style.width="0",this.progressElement.style.opacity="1",document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()}fadeProgressElement(t){this.progressElement.style.opacity="0",setTimeout(t,U.animationDuration*1.5)}uninstallProgressElement(){this.progressElement.parentNode&&document.documentElement.removeChild(this.progressElement)}startTrickling(){this.trickleInterval||(this.trickleInterval=window.setInterval(this.trickle,U.animationDuration))}stopTrickling(){window.clearInterval(this.trickleInterval),delete this.trickleInterval}refresh(){requestAnimationFrame(()=>{this.progressElement.style.width=`${10+this.value*90}%`})}createStylesheetElement(){let t=document.createElement("style");return t.type="text/css",t.textContent=U.defaultCSS,this.cspNonce&&(t.nonce=this.cspNonce),t}createProgressElement(){let t=document.createElement("div");return t.className="turbo-progress-bar",t}get cspNonce(){return Wt("csp-nonce")}};g(U,"animationDuration",300);var $e=U,_e=class extends Bt{constructor(){super(...arguments);g(this,"detailsByOuterHTML",this.children.filter(e=>!Wa(e)).map(e=>Xa(e)).reduce((e,i)=>{let{outerHTML:o}=i,a=o in e?e[o]:{type:Ca(i),tracked:ha(i),elements:[]};return{...e,[o]:{...a,elements:[...a.elements,i]}}},{}))}get trackedElementSignature(){return Object.keys(this.detailsByOuterHTML).filter(e=>this.detailsByOuterHTML[e].tracked).join("")}getScriptElementsNotInSnapshot(e){return this.getElementsMatchingTypeNotInSnapshot("script",e)}getStylesheetElementsNotInSnapshot(e){return this.getElementsMatchingTypeNotInSnapshot("stylesheet",e)}getElementsMatchingTypeNotInSnapshot(e,i){return Object.keys(this.detailsByOuterHTML).filter(o=>!(o in i.detailsByOuterHTML)).map(o=>this.detailsByOuterHTML[o]).filter(({type:o})=>o==e).map(({elements:[o]})=>o)}get provisionalElements(){return Object.keys(this.detailsByOuterHTML).reduce((e,i)=>{let{type:o,tracked:a,elements:s}=this.detailsByOuterHTML[i];return o==null&&!a?[...e,...s]:s.length>1?[...e,...s.slice(1)]:e},[])}getMetaValue(e){let i=this.findMetaElementByName(e);return i?i.getAttribute("content"):null}findMetaElementByName(e){return Object.keys(this.detailsByOuterHTML).reduce((i,o)=>{let{elements:[a]}=this.detailsByOuterHTML[o];return Fa(a,e)?a:i},void 0|void 0)}};function Ca(b){if(ua(b))return"script";if(Ba(b))return"stylesheet"}function ha(b){return b.getAttribute("data-turbo-track")=="reload"}function ua(b){return b.localName=="script"}function Wa(b){return b.localName=="noscript"}function Ba(b){let t=b.localName;return t=="style"||t=="link"&&b.getAttribute("rel")=="stylesheet"}function Fa(b,t){return b.localName=="meta"&&b.getAttribute("name")==t}function Xa(b){return b.hasAttribute("nonce")&&b.setAttribute("nonce",""),b}var x=class b extends Bt{static fromHTMLString(t=""){return this.fromDocument(Cb(t))}static fromElement(t){return this.fromDocument(t.ownerDocument)}static fromDocument({documentElement:t,body:e,head:i}){return new this(t,e,new _e(i))}constructor(t,e,i){super(e),this.documentElement=t,this.headSnapshot=i}clone(){let t=this.element.cloneNode(!0),e=this.element.querySelectorAll("select"),i=t.querySelectorAll("select");for(let[o,a]of e.entries()){let s=i[o];for(let m of s.selectedOptions)m.selected=!1;for(let m of a.selectedOptions)s.options[m.index].selected=!0}for(let o of t.querySelectorAll('input[type="password"]'))o.value="";return new b(this.documentElement,t,this.headSnapshot)}get lang(){return this.documentElement.getAttribute("lang")}get headElement(){return this.headSnapshot.element}get rootLocation(){let t=this.getSetting("root")??"/";return A(t)}get cacheControlValue(){return this.getSetting("cache-control")}get isPreviewable(){return this.cacheControlValue!="no-preview"}get isCacheable(){return this.cacheControlValue!="no-cache"}get isVisitable(){return this.getSetting("visit-control")!="reload"}get prefersViewTransitions(){return this.headSnapshot.getMetaValue("view-transition")==="same-origin"}get shouldMorphPage(){return this.getSetting("refresh-method")==="morph"}get shouldPreserveScrollPosition(){return this.getSetting("refresh-scroll")==="preserve"}getSetting(t){return this.headSnapshot.getMetaValue(`turbo-${t}`)}},Nt,z,ti=class{constructor(){Z(this,Nt,!1);Z(this,z,Promise.resolve())}renderChange(t,e){return t&&this.viewTransitionsAvailable&&!G(this,Nt)?(u(this,Nt,!0),u(this,z,G(this,z).then(async()=>{await document.startViewTransition(e).finished}))):u(this,z,G(this,z).then(e)),G(this,z)}get viewTransitionsAvailable(){return document.startViewTransition}};Nt=new WeakMap,z=new WeakMap;var ya={action:"advance",historyChanged:!1,visitCachedSnapshot:()=>{},willRender:!0,updateHistory:!0,shouldCacheSnapshot:!0,acceptsStreamResponse:!1},$t={visitStart:"visitStart",requestStart:"requestStart",requestEnd:"requestEnd",visitEnd:"visitEnd"},L={initialized:"initialized",started:"started",canceled:"canceled",failed:"failed",completed:"completed"},dt={networkFailure:0,timeoutFailure:-1,contentTypeMismatch:-2},Ra={advance:"forward",restore:"back",replace:"none"},ei=class{constructor(t,e,i,o={}){g(this,"identifier",M());g(this,"timingMetrics",{});g(this,"followedRedirect",!1);g(this,"historyChanged",!1);g(this,"scrolled",!1);g(this,"shouldCacheSnapshot",!0);g(this,"acceptsStreamResponse",!1);g(this,"snapshotCached",!1);g(this,"state",L.initialized);g(this,"viewTransitioner",new ti);this.delegate=t,this.location=e,this.restorationIdentifier=i||M();let{action:a,historyChanged:s,referrer:m,snapshot:h,snapshotHTML:F,response:v,visitCachedSnapshot:w,willRender:Y,updateHistory:He,shouldCacheSnapshot:we,acceptsStreamResponse:Pt,direction:at}={...ya,...o};this.action=a,this.historyChanged=s,this.referrer=m,this.snapshot=h,this.snapshotHTML=F,this.response=v,this.isSamePage=this.delegate.locationWithActionIsSamePage(this.location,this.action),this.isPageRefresh=this.view.isPageRefresh(this),this.visitCachedSnapshot=w,this.willRender=Y,this.updateHistory=He,this.scrolled=!Y,this.shouldCacheSnapshot=we,this.acceptsStreamResponse=Pt,this.direction=at||Ra[a]}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}get restorationData(){return this.history.getRestorationDataForIdentifier(this.restorationIdentifier)}get silent(){return this.isSamePage}start(){this.state==L.initialized&&(this.recordTimingMetric($t.visitStart),this.state=L.started,this.adapter.visitStarted(this),this.delegate.visitStarted(this))}cancel(){this.state==L.started&&(this.request&&this.request.cancel(),this.cancelRender(),this.state=L.canceled)}complete(){this.state==L.started&&(this.recordTimingMetric($t.visitEnd),this.adapter.visitCompleted(this),this.state=L.completed,this.followRedirect(),this.followedRedirect||this.delegate.visitCompleted(this))}fail(){this.state==L.started&&(this.state=L.failed,this.adapter.visitFailed(this),this.delegate.visitCompleted(this))}changeHistory(){if(!this.historyChanged&&this.updateHistory){let t=this.location.href===this.referrer?.href?"replace":this.action,e=ub(t);this.history.update(e,this.location,this.restorationIdentifier),this.historyChanged=!0}}issueRequest(){this.hasPreloadedResponse()?this.simulateRequest():this.shouldIssueRequest()&&!this.request&&(this.request=new ot(this,Q.get,this.location),this.request.perform())}simulateRequest(){this.response&&(this.startRequest(),this.recordResponse(),this.finishRequest())}startRequest(){this.recordTimingMetric($t.requestStart),this.adapter.visitRequestStarted(this)}recordResponse(t=this.response){if(this.response=t,t){let{statusCode:e}=t;gb(e)?this.adapter.visitRequestCompleted(this):this.adapter.visitRequestFailedWithStatusCode(this,e)}}finishRequest(){this.recordTimingMetric($t.requestEnd),this.adapter.visitRequestFinished(this)}loadResponse(){if(this.response){let{statusCode:t,responseHTML:e}=this.response;this.render(async()=>{if(this.shouldCacheSnapshot&&this.cacheSnapshot(),this.view.renderPromise&&await this.view.renderPromise,gb(t)&&e!=null){let i=x.fromHTMLString(e);await this.renderPageSnapshot(i,!1),this.adapter.visitRendered(this),this.complete()}else await this.view.renderError(x.fromHTMLString(e),this),this.adapter.visitRendered(this),this.fail()})}}getCachedSnapshot(){let t=this.view.getCachedSnapshotForLocation(this.location)||this.getPreloadedSnapshot();if(t&&(!bt(this.location)||t.hasAnchor(bt(this.location)))&&(this.action=="restore"||t.isPreviewable))return t}getPreloadedSnapshot(){if(this.snapshotHTML)return x.fromHTMLString(this.snapshotHTML)}hasCachedSnapshot(){return this.getCachedSnapshot()!=null}loadCachedSnapshot(){let t=this.getCachedSnapshot();if(t){let e=this.shouldIssueRequest();this.render(async()=>{this.cacheSnapshot(),this.isSamePage||this.isPageRefresh?this.adapter.visitRendered(this):(this.view.renderPromise&&await this.view.renderPromise,await this.renderPageSnapshot(t,e),this.adapter.visitRendered(this),e||this.complete())})}}followRedirect(){this.redirectedToLocation&&!this.followedRedirect&&this.response?.redirected&&(this.adapter.visitProposedToLocation(this.redirectedToLocation,{action:"replace",response:this.response,shouldCacheSnapshot:!1,willRender:!1}),this.followedRedirect=!0)}goToSamePageAnchor(){this.isSamePage&&this.render(async()=>{this.cacheSnapshot(),this.performScroll(),this.changeHistory(),this.adapter.visitRendered(this)})}prepareRequest(t){this.acceptsStreamResponse&&t.acceptResponseType(f.contentType)}requestStarted(){this.startRequest()}requestPreventedHandlingResponse(t,e){}async requestSucceededWithResponse(t,e){let i=await e.responseHTML,{redirected:o,statusCode:a}=e;i==null?this.recordResponse({statusCode:dt.contentTypeMismatch,redirected:o}):(this.redirectedToLocation=e.redirected?e.location:void 0,this.recordResponse({statusCode:a,responseHTML:i,redirected:o}))}async requestFailedWithResponse(t,e){let i=await e.responseHTML,{redirected:o,statusCode:a}=e;i==null?this.recordResponse({statusCode:dt.contentTypeMismatch,redirected:o}):this.recordResponse({statusCode:a,responseHTML:i,redirected:o})}requestErrored(t,e){this.recordResponse({statusCode:dt.networkFailure,redirected:!1})}requestFinished(){this.finishRequest()}performScroll(){!this.scrolled&&!this.view.forceReloaded&&!this.view.shouldPreserveScrollPosition(this)&&(this.action=="restore"?this.scrollToRestoredPosition()||this.scrollToAnchor()||this.view.scrollToTop():this.scrollToAnchor()||this.view.scrollToTop(),this.isSamePage&&this.delegate.visitScrolledToSamePageLocation(this.view.lastRenderedLocation,this.location),this.scrolled=!0)}scrollToRestoredPosition(){let{scrollPosition:t}=this.restorationData;if(t)return this.view.scrollToPosition(t),!0}scrollToAnchor(){let t=bt(this.location);if(t!=null)return this.view.scrollToAnchor(t),!0}recordTimingMetric(t){this.timingMetrics[t]=new Date().getTime()}getTimingMetrics(){return{...this.timingMetrics}}getHistoryMethodForAction(t){switch(t){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}hasPreloadedResponse(){return typeof this.response=="object"}shouldIssueRequest(){return this.isSamePage?!1:this.action=="restore"?!this.hasCachedSnapshot():this.willRender}cacheSnapshot(){this.snapshotCached||(this.view.cacheSnapshot(this.snapshot).then(t=>t&&this.visitCachedSnapshot(t)),this.snapshotCached=!0)}async render(t){this.cancelRender(),await new Promise(e=>{this.frame=document.visibilityState==="hidden"?setTimeout(()=>e(),0):requestAnimationFrame(()=>e())}),await t(),delete this.frame}async renderPageSnapshot(t,e){await this.viewTransitioner.renderChange(this.view.shouldTransitionTo(t),async()=>{await this.view.renderPage(t,e,this.willRender,this),this.performScroll()})}cancelRender(){this.frame&&(cancelAnimationFrame(this.frame),delete this.frame)}};function gb(b){return b>=200&&b<300}var ii=class{constructor(t){g(this,"progressBar",new $e);g(this,"showProgressBar",()=>{this.progressBar.show()});this.session=t}visitProposedToLocation(t,e){S(t,this.navigator.rootLocation)?this.navigator.startVisit(t,e?.restorationIdentifier||M(),e):window.location.href=t.toString()}visitStarted(t){this.location=t.location,t.loadCachedSnapshot(),t.issueRequest(),t.goToSamePageAnchor()}visitRequestStarted(t){this.progressBar.setValue(0),t.hasCachedSnapshot()||t.action!="restore"?this.showVisitProgressBarAfterDelay():this.showProgressBar()}visitRequestCompleted(t){t.loadResponse()}visitRequestFailedWithStatusCode(t,e){switch(e){case dt.networkFailure:case dt.timeoutFailure:case dt.contentTypeMismatch:return this.reload({reason:"request_failed",context:{statusCode:e}});default:return t.loadResponse()}}visitRequestFinished(t){}visitCompleted(t){this.progressBar.setValue(1),this.hideVisitProgressBar()}pageInvalidated(t){this.reload(t)}visitFailed(t){this.progressBar.setValue(1),this.hideVisitProgressBar()}visitRendered(t){}formSubmissionStarted(t){this.progressBar.setValue(0),this.showFormProgressBarAfterDelay()}formSubmissionFinished(t){this.progressBar.setValue(1),this.hideFormProgressBar()}showVisitProgressBarAfterDelay(){this.visitProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay)}hideVisitProgressBar(){this.progressBar.hide(),this.visitProgressBarTimeout!=null&&(window.clearTimeout(this.visitProgressBarTimeout),delete this.visitProgressBarTimeout)}showFormProgressBarAfterDelay(){this.formProgressBarTimeout==null&&(this.formProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay))}hideFormProgressBar(){this.progressBar.hide(),this.formProgressBarTimeout!=null&&(window.clearTimeout(this.formProgressBarTimeout),delete this.formProgressBarTimeout)}reload(t){W("turbo:reload",{detail:t}),window.location.href=this.location?.toString()||window.location.href}get navigator(){return this.session.navigator}},bi=class{constructor(){g(this,"selector","[data-turbo-temporary]");g(this,"deprecatedSelector","[data-turbo-cache=false]");g(this,"started",!1);g(this,"removeTemporaryElements",t=>{for(let e of this.temporaryElements)e.remove()})}start(){this.started||(this.started=!0,addEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}get temporaryElements(){return[...document.querySelectorAll(this.selector),...this.temporaryElementsWithDeprecation]}get temporaryElementsWithDeprecation(){let t=document.querySelectorAll(this.deprecatedSelector);return t.length&&console.warn(`The ${this.deprecatedSelector} selector is deprecated and will be removed in a future version. Use ${this.selector} instead.`),[...t]}},Ze,kb,mt,_t,It,te,oi=class{constructor(t,e){Z(this,Ze);Z(this,mt);Z(this,It);this.session=t,this.element=e,this.linkInterceptor=new le(this,e),this.formSubmitObserver=new Yt(this,e)}start(){this.linkInterceptor.start(),this.formSubmitObserver.start()}stop(){this.linkInterceptor.stop(),this.formSubmitObserver.stop()}shouldInterceptLinkClick(t,e,i){return p(this,mt,_t).call(this,t)}linkClickIntercepted(t,e,i){let o=p(this,It,te).call(this,t);o&&o.delegate.linkClickIntercepted(t,e,i)}willSubmitForm(t,e){return t.closest("turbo-frame")==null&&p(this,Ze,kb).call(this,t,e)&&p(this,mt,_t).call(this,t,e)}formSubmitted(t,e){let i=p(this,It,te).call(this,t,e);i&&i.delegate.formSubmitted(t,e)}};Ze=new WeakSet,kb=function(t,e){let i=yi(t,e),o=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),a=A(o?.content??"/");return p(this,mt,_t).call(this,t,e)&&S(i,a)},mt=new WeakSet,_t=function(t,e){if(t instanceof HTMLFormElement?this.session.submissionIsNavigatable(t,e):this.session.elementIsNavigatable(t)){let o=p(this,It,te).call(this,t,e);return o?o!=t.closest("turbo-frame"):!1}else return!1},It=new WeakSet,te=function(t,e){let i=e?.getAttribute("data-turbo-frame")||t.getAttribute("data-turbo-frame");if(i&&i!="_top"){let o=this.element.querySelector(`#${i}:not([disabled])`);if(o instanceof V)return o}};var ai=class{constructor(t){g(this,"location");g(this,"restorationIdentifier",M());g(this,"restorationData",{});g(this,"started",!1);g(this,"pageLoaded",!1);g(this,"currentIndex",0);g(this,"onPopState",t=>{if(this.shouldHandlePopState()){let{turbo:e}=t.state||{};if(e){this.location=new URL(window.location.href);let{restorationIdentifier:i,restorationIndex:o}=e;this.restorationIdentifier=i;let a=o>this.currentIndex?"forward":"back";this.delegate.historyPoppedToLocationWithRestorationIdentifierAndDirection(this.location,i,a),this.currentIndex=o}}});g(this,"onPageLoad",async t=>{await Uo(),this.pageLoaded=!0});this.delegate=t}start(){this.started||(addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.currentIndex=history.state?.turbo?.restorationIndex||0,this.started=!0,this.replace(new URL(window.location.href)))}stop(){this.started&&(removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1)}push(t,e){this.update(history.pushState,t,e)}replace(t,e){this.update(history.replaceState,t,e)}update(t,e,i=M()){t===history.pushState&&++this.currentIndex;let o={turbo:{restorationIdentifier:i,restorationIndex:this.currentIndex}};t.call(history,o,"",e.href),this.location=e,this.restorationIdentifier=i}getRestorationDataForIdentifier(t){return this.restorationData[t]||{}}updateRestorationData(t){let{restorationIdentifier:e}=this,i=this.restorationData[e];this.restorationData[e]={...i,...t}}assumeControlOfScrollRestoration(){this.previousScrollRestoration||(this.previousScrollRestoration=history.scrollRestoration??"auto",history.scrollRestoration="manual")}relinquishControlOfScrollRestoration(){this.previousScrollRestoration&&(history.scrollRestoration=this.previousScrollRestoration,delete this.previousScrollRestoration)}shouldHandlePopState(){return this.pageIsLoaded()}pageIsLoaded(){return this.pageLoaded||document.readyState=="complete"}},Zt,ft,Ht,wt,Ge,St,pe,Lb,Ce,Ub,ri=class{constructor(t,e){Z(this,pe);Z(this,Ce);g(this,"started",!1);Z(this,Zt,null);Z(this,ft,()=>{this.eventTarget.addEventListener("mouseenter",G(this,Ht),{capture:!0,passive:!0}),this.eventTarget.addEventListener("mouseleave",G(this,wt),{capture:!0,passive:!0}),this.eventTarget.addEventListener("turbo:before-fetch-request",G(this,St),!0),this.started=!0});Z(this,Ht,t=>{if(Wt("turbo-prefetch")==="false")return;let e=t.target;if(e.matches&&e.matches("a[href]:not([target^=_]):not([download])")&&p(this,Ce,Ub).call(this,e)){let o=e,a=yb(o);if(this.delegate.canPrefetchRequestToLocation(o,a)){u(this,Zt,o);let s=new ot(this,Q.get,a,new URLSearchParams,e);gt.setLater(a.toString(),s,G(this,pe,Lb))}}});Z(this,wt,t=>{t.target===G(this,Zt)&&G(this,Ge).call(this)});Z(this,Ge,()=>{gt.clear(),u(this,Zt,null)});Z(this,St,t=>{if(t.target.tagName!=="FORM"&&t.detail.fetchOptions.method==="GET"){let e=gt.get(t.detail.url.toString());e&&(t.detail.fetchRequest=e),gt.clear()}});this.delegate=t,this.eventTarget=e}start(){this.started||(this.eventTarget.readyState==="loading"?this.eventTarget.addEventListener("DOMContentLoaded",G(this,ft),{once:!0}):G(this,ft).call(this))}stop(){this.started&&(this.eventTarget.removeEventListener("mouseenter",G(this,Ht),{capture:!0,passive:!0}),this.eventTarget.removeEventListener("mouseleave",G(this,wt),{capture:!0,passive:!0}),this.eventTarget.removeEventListener("turbo:before-fetch-request",G(this,St),!0),this.started=!1)}prepareRequest(t){let e=t.target;t.headers["X-Sec-Purpose"]="prefetch";let i=e.closest("turbo-frame"),o=e.getAttribute("data-turbo-frame")||i?.getAttribute("target")||i?.id;o&&o!=="_top"&&(t.headers["Turbo-Frame"]=o)}requestSucceededWithResponse(){}requestStarted(t){}requestErrored(t){}requestFinished(t){}requestPreventedHandlingResponse(t,e){}requestFailedWithResponse(t,e){}};Zt=new WeakMap,ft=new WeakMap,Ht=new WeakMap,wt=new WeakMap,Ge=new WeakMap,St=new WeakMap,pe=new WeakSet,Lb=function(){return Number(Wt("turbo-prefetch-cache-time"))||oa},Ce=new WeakSet,Ub=function(t){return!(!t.getAttribute("href")||Aa(t)||va(t)||Ya(t)||Qa(t)||Va(t))};var Aa=b=>b.origin!==document.location.origin||!["http:","https:"].includes(b.protocol)||b.hasAttribute("target"),va=b=>b.pathname+b.search===document.location.pathname+document.location.search||b.href.startsWith("#"),Ya=b=>{if(b.getAttribute("data-turbo-prefetch")==="false"||b.getAttribute("data-turbo")==="false")return!0;let t=nt(b,"[data-turbo-prefetch]");return!!(t&&t.getAttribute("data-turbo-prefetch")==="false")},Qa=b=>{let t=b.getAttribute("data-turbo-method");return!!(t&&t.toLowerCase()!=="get"||xa(b)||b.hasAttribute("data-turbo-confirm")||b.hasAttribute("data-turbo-stream"))},xa=b=>b.hasAttribute("data-remote")||b.hasAttribute("data-behavior")||b.hasAttribute("data-confirm")||b.hasAttribute("data-method"),Va=b=>W("turbo:before-prefetch",{target:b,cancelable:!0}).defaultPrevented,he,Ob,ue,Nb,ci=class{constructor(t){Z(this,he);Z(this,ue);this.delegate=t}proposeVisit(t,e={}){this.delegate.allowsVisitingLocationWithAction(t,e.action)&&this.delegate.visitProposedToLocation(t,e)}startVisit(t,e,i={}){this.stop(),this.currentVisit=new ei(this,A(t),e,{referrer:this.location,...i}),this.currentVisit.start()}submitForm(t,e){this.stop(),this.formSubmission=new re(this,t,e,!0),this.formSubmission.start()}stop(){this.formSubmission&&(this.formSubmission.stop(),delete this.formSubmission),this.currentVisit&&(this.currentVisit.cancel(),delete this.currentVisit)}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get rootLocation(){return this.view.snapshot.rootLocation}get history(){return this.delegate.history}formSubmissionStarted(t){typeof this.adapter.formSubmissionStarted=="function"&&this.adapter.formSubmissionStarted(t)}async formSubmissionSucceededWithResponse(t,e){if(t==this.formSubmission){let i=await e.responseHTML;if(i){let o=t.isSafe;o||this.view.clearSnapshotCache();let{statusCode:a,redirected:s}=e,h={action:p(this,he,Ob).call(this,t,e),shouldCacheSnapshot:o,response:{statusCode:a,responseHTML:i,redirected:s}};this.proposeVisit(e.location,h)}}}async formSubmissionFailedWithResponse(t,e){let i=await e.responseHTML;if(i){let o=x.fromHTMLString(i);e.serverError?await this.view.renderError(o,this.currentVisit):await this.view.renderPage(o,!1,!0,this.currentVisit),o.shouldPreserveScrollPosition||this.view.scrollToTop(),this.view.clearSnapshotCache()}}formSubmissionErrored(t,e){console.error(e)}formSubmissionFinished(t){typeof this.adapter.formSubmissionFinished=="function"&&this.adapter.formSubmissionFinished(t)}visitStarted(t){this.delegate.visitStarted(t)}visitCompleted(t){this.delegate.visitCompleted(t),delete this.currentVisit}locationWithActionIsSamePage(t,e){let i=bt(t),o=bt(this.view.lastRenderedLocation),a=e==="restore"&&typeof i>"u";return e!=="replace"&&Te(t)===Te(this.view.lastRenderedLocation)&&(a||i!=null&&i!==o)}visitScrolledToSamePageLocation(t,e){this.delegate.visitScrolledToSamePageLocation(t,e)}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}};he=new WeakSet,Ob=function(t,e){let{submitter:i,formElement:o}=t;return it(i,o)||p(this,ue,Nb).call(this,e)},ue=new WeakSet,Nb=function(t){return t.redirected&&t.location.href===this.location?.href?"replace":"advance"};var $={initial:0,loading:1,interactive:2,complete:3},li=class{constructor(t){g(this,"stage",$.initial);g(this,"started",!1);g(this,"interpretReadyState",()=>{let{readyState:t}=this;t=="interactive"?this.pageIsInteractive():t=="complete"&&this.pageIsComplete()});g(this,"pageWillUnload",()=>{this.delegate.pageWillUnload()});this.delegate=t}start(){this.started||(this.stage==$.initial&&(this.stage=$.loading),document.addEventListener("readystatechange",this.interpretReadyState,!1),addEventListener("pagehide",this.pageWillUnload,!1),this.started=!0)}stop(){this.started&&(document.removeEventListener("readystatechange",this.interpretReadyState,!1),removeEventListener("pagehide",this.pageWillUnload,!1),this.started=!1)}pageIsInteractive(){this.stage==$.loading&&(this.stage=$.interactive,this.delegate.pageBecameInteractive())}pageIsComplete(){this.pageIsInteractive(),this.stage==$.interactive&&(this.stage=$.complete,this.delegate.pageLoaded())}get readyState(){return document.readyState}},si=class{constructor(t){g(this,"started",!1);g(this,"onScroll",()=>{this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})});this.delegate=t}start(){this.started||(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)}stop(){this.started&&(removeEventListener("scroll",this.onScroll,!1),this.started=!1)}updatePosition(t){this.delegate.scrollPositionChanged(t)}},gi=class{render({fragment:t}){ne.preservingPermanentElements(this,Ja(t),()=>{ka(t,()=>{La(()=>{document.documentElement.appendChild(t)})})})}enteringBardo(t,e){e.replaceWith(t.cloneNode(!0))}leavingBardo(){}};function Ja(b){let t=Vb(document.documentElement),e={};for(let i of t){let{id:o}=i;for(let a of b.querySelectorAll("turbo-stream")){let s=xb(a.templateElement.content,o);s&&(e[o]=[i,s])}}return e}async function ka(b,t){let e=`turbo-stream-autofocus-${M()}`,i=b.querySelectorAll("turbo-stream"),o=Ua(i),a=null;if(o&&(o.id?a=o.id:a=e,o.id=a),t(),await Rt(),(document.activeElement==null||document.activeElement==document.body)&&a){let m=document.getElementById(a);Xi(m)&&m.focus(),m&&m.id==e&&m.removeAttribute("id")}}async function La(b){let[t,e]=await So(b,()=>document.activeElement),i=t&&t.id;if(i){let o=document.getElementById(i);Xi(o)&&o!=e&&o.focus()}}function Ua(b){for(let t of b){let e=Bb(t.templateElement.content);if(e)return e}return null}var j,ni=class{constructor(t){g(this,"sources",new Set);Z(this,j,!1);g(this,"inspectFetchResponse",t=>{let e=Oa(t);e&&Na(e)&&(t.preventDefault(),this.receiveMessageResponse(e))});g(this,"receiveMessageEvent",t=>{G(this,j)&&typeof t.data=="string"&&this.receiveMessageHTML(t.data)});this.delegate=t}start(){G(this,j)||(u(this,j,!0),addEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}stop(){G(this,j)&&(u(this,j,!1),removeEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}connectStreamSource(t){this.streamSourceIsConnected(t)||(this.sources.add(t),t.addEventListener("message",this.receiveMessageEvent,!1))}disconnectStreamSource(t){this.streamSourceIsConnected(t)&&(this.sources.delete(t),t.removeEventListener("message",this.receiveMessageEvent,!1))}streamSourceIsConnected(t){return this.sources.has(t)}async receiveMessageResponse(t){let e=await t.responseHTML;e&&this.receiveMessageHTML(e)}receiveMessageHTML(t){this.delegate.receivedMessageFromStream(f.wrap(t))}};j=new WeakMap;function Oa(b){let t=b.detail?.fetchResponse;if(t instanceof vt)return t}function Na(b){return(b.contentType??"").startsWith(f.contentType)}var di=class extends Qt{static renderElement(t,e){let{documentElement:i,body:o}=document;i.replaceChild(e,o)}async render(){this.replaceHeadAndBody(),this.activateScriptElements()}replaceHeadAndBody(){let{documentElement:t,head:e}=document;t.replaceChild(this.newHead,e),this.renderElement(this.currentElement,this.newElement)}activateScriptElements(){for(let t of this.scriptElements){let e=t.parentNode;if(e){let i=At(t);e.replaceChild(i,t)}}}get newHead(){return this.newSnapshot.headSnapshot.element}get scriptElements(){return document.documentElement.querySelectorAll("script")}},We,fb,Vt=class extends Qt{constructor(){super(...arguments);Z(this,We)}static renderElement(e,i){document.body&&i instanceof HTMLBodyElement?document.body.replaceWith(i):document.documentElement.appendChild(i)}get shouldRender(){return this.newSnapshot.isVisitable&&this.trackedElementsAreIdentical}get reloadReason(){if(!this.newSnapshot.isVisitable)return{reason:"turbo_visit_control_is_reload"};if(!this.trackedElementsAreIdentical)return{reason:"tracked_element_mismatch"}}async prepareToRender(){p(this,We,fb).call(this),await this.mergeHead()}async render(){this.willRender&&await this.replaceBody()}finishRendering(){super.finishRendering(),this.isPreview||this.focusFirstAutofocusableElement()}get currentHeadSnapshot(){return this.currentSnapshot.headSnapshot}get newHeadSnapshot(){return this.newSnapshot.headSnapshot}get newElement(){return this.newSnapshot.element}async mergeHead(){let e=this.mergeProvisionalElements(),i=this.copyNewHeadStylesheetElements();this.copyNewHeadScriptElements(),await e,await i,this.willRender&&this.removeUnusedDynamicStylesheetElements()}async replaceBody(){await this.preservingPermanentElements(async()=>{this.activateNewBody(),await this.assignNewBody()})}get trackedElementsAreIdentical(){return this.currentHeadSnapshot.trackedElementSignature==this.newHeadSnapshot.trackedElementSignature}async copyNewHeadStylesheetElements(){let e=[];for(let i of this.newHeadStylesheetElements)e.push(fo(i)),document.head.appendChild(i);await Promise.all(e)}copyNewHeadScriptElements(){for(let e of this.newHeadScriptElements)document.head.appendChild(At(e))}removeUnusedDynamicStylesheetElements(){for(let e of this.unusedDynamicStylesheetElements)document.head.removeChild(e)}async mergeProvisionalElements(){let e=[...this.newHeadProvisionalElements];for(let i of this.currentHeadProvisionalElements)this.isCurrentElementInElementList(i,e)||document.head.removeChild(i);for(let i of e)document.head.appendChild(i)}isCurrentElementInElementList(e,i){for(let[o,a]of i.entries()){if(e.tagName=="TITLE"){if(a.tagName!="TITLE")continue;if(e.innerHTML==a.innerHTML)return i.splice(o,1),!0}if(a.isEqualNode(e))return i.splice(o,1),!0}return!1}removeCurrentHeadProvisionalElements(){for(let e of this.currentHeadProvisionalElements)document.head.removeChild(e)}copyNewHeadProvisionalElements(){for(let e of this.newHeadProvisionalElements)document.head.appendChild(e)}activateNewBody(){document.adoptNode(this.newElement),this.activateNewBodyScriptElements()}activateNewBodyScriptElements(){for(let e of this.newBodyScriptElements){let i=At(e);e.replaceWith(i)}}async assignNewBody(){await this.renderElement(this.currentElement,this.newElement)}get unusedDynamicStylesheetElements(){return this.oldHeadStylesheetElements.filter(e=>e.getAttribute("data-turbo-track")==="dynamic")}get oldHeadStylesheetElements(){return this.currentHeadSnapshot.getStylesheetElementsNotInSnapshot(this.newHeadSnapshot)}get newHeadStylesheetElements(){return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot)}get newHeadScriptElements(){return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot)}get currentHeadProvisionalElements(){return this.currentHeadSnapshot.provisionalElements}get newHeadProvisionalElements(){return this.newHeadSnapshot.provisionalElements}get newBodyScriptElements(){return this.newElement.querySelectorAll("script")}};We=new WeakSet,fb=function(){let{documentElement:e}=this.currentSnapshot,{lang:i}=this.newSnapshot;i?e.setAttribute("lang",i):e.removeAttribute("lang")};var mi=class extends Vt{static renderElement(t,e){vi(t,e,{callbacks:{beforeNodeMorphed:i=>!nb(i)}});for(let i of t.querySelectorAll("turbo-frame"))nb(i)&&i.reload();W("turbo:morph",{detail:{currentElement:t,newElement:e}})}async preservingPermanentElements(t){return await t()}get renderMethod(){return"morph"}get shouldAutofocus(){return!1}};function nb(b){return b instanceof V&&b.src&&b.refresh==="morph"&&!b.closest("[data-turbo-permanent]")}var Ii=class{constructor(t){g(this,"keys",[]);g(this,"snapshots",{});this.size=t}has(t){return qt(t)in this.snapshots}get(t){if(this.has(t)){let e=this.read(t);return this.touch(t),e}}put(t,e){return this.write(t,e),this.touch(t),e}clear(){this.snapshots={}}read(t){return this.snapshots[qt(t)]}write(t,e){this.snapshots[qt(t)]=e}touch(t){let e=qt(t),i=this.keys.indexOf(e);i>-1&&this.keys.splice(i,1),this.keys.unshift(e),this.trim()}trim(){for(let t of this.keys.splice(this.size))delete this.snapshots[t]}},Zi=class extends ce{constructor(){super(...arguments);g(this,"snapshotCache",new Ii(10));g(this,"lastRenderedLocation",new URL(location.href));g(this,"forceReloaded",!1)}shouldTransitionTo(e){return this.snapshot.prefersViewTransitions&&e.prefersViewTransitions}renderPage(e,i=!1,o=!0,a){let m=this.isPageRefresh(a)&&this.snapshot.shouldMorphPage?mi:Vt,h=new m(this.snapshot,e,i,o);return h.shouldRender?a?.changeHistory():this.forceReloaded=!0,this.render(h)}renderError(e,i){i?.changeHistory();let o=new di(this.snapshot,e,!1);return this.render(o)}clearSnapshotCache(){this.snapshotCache.clear()}async cacheSnapshot(e=this.snapshot){if(e.isCacheable){this.delegate.viewWillCacheSnapshot();let{lastRenderedLocation:i}=this;await pb();let o=e.clone();return this.snapshotCache.put(i,o),o}}getCachedSnapshotForLocation(e){return this.snapshotCache.get(e)}isPageRefresh(e){return!e||this.lastRenderedLocation.pathname===e.location.pathname&&e.action==="replace"}shouldPreserveScrollPosition(e){return this.isPageRefresh(e)&&this.snapshot.shouldPreserveScrollPosition}get snapshot(){return x.fromElement(this.element)}},zt,Gi=class{constructor(t,e){g(this,"selector","a[data-turbo-preload]");Z(this,zt,()=>{this.preloadOnLoadLinksForView(document.body)});this.delegate=t,this.snapshotCache=e}start(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",G(this,zt)):this.preloadOnLoadLinksForView(document.body)}stop(){document.removeEventListener("DOMContentLoaded",G(this,zt))}preloadOnLoadLinksForView(t){for(let e of t.querySelectorAll(this.selector))this.delegate.shouldPreloadLink(e)&&this.preloadURL(e)}async preloadURL(t){let e=new URL(t.href);if(this.snapshotCache.has(e))return;await new ot(this,Q.get,e,new URLSearchParams,t).perform()}prepareRequest(t){t.headers["X-Sec-Purpose"]="prefetch"}async requestSucceededWithResponse(t,e){try{let i=await e.responseHTML,o=x.fromHTMLString(i);this.snapshotCache.put(t.url,o)}catch{}}requestStarted(t){}requestErrored(t){}requestFinished(t){}requestPreventedHandlingResponse(t,e){}requestFailedWithResponse(t,e){}};zt=new WeakMap;var Gt,ee,pi=class{constructor(t){Z(this,Gt);this.session=t}clear(){this.session.clearCache()}resetCacheControl(){p(this,Gt,ee).call(this,"")}exemptPageFromCache(){p(this,Gt,ee).call(this,"no-cache")}exemptPageFromPreview(){p(this,Gt,ee).call(this,"no-preview")}};Gt=new WeakSet,ee=function(t){wo("turbo-cache-control",t)};var jt,Ci=class{constructor(t){g(this,"navigator",new ci(this));g(this,"history",new ai(this));g(this,"view",new Zi(this,document.documentElement));g(this,"adapter",new ii(this));g(this,"pageObserver",new li(this));g(this,"cacheObserver",new bi);g(this,"linkPrefetchObserver",new ri(this,document));g(this,"linkClickObserver",new se(this,window));g(this,"formSubmitObserver",new Yt(this,document));g(this,"scrollObserver",new si(this));g(this,"streamObserver",new ni(this));g(this,"formLinkClickObserver",new ge(this,document.documentElement));g(this,"frameRedirector",new oi(this,document.documentElement));g(this,"streamMessageRenderer",new gi);g(this,"cache",new pi(this));g(this,"enabled",!0);g(this,"started",!1);Z(this,jt,150);this.recentRequests=t,this.preloader=new Gi(this,this.view.snapshotCache),this.debouncedRefresh=this.refresh,this.pageRefreshDebouncePeriod=this.pageRefreshDebouncePeriod}start(){this.started||(this.pageObserver.start(),this.cacheObserver.start(),this.linkPrefetchObserver.start(),this.formLinkClickObserver.start(),this.linkClickObserver.start(),this.formSubmitObserver.start(),this.scrollObserver.start(),this.streamObserver.start(),this.frameRedirector.start(),this.history.start(),this.preloader.start(),this.started=!0,this.enabled=!0)}disable(){this.enabled=!1}stop(){this.started&&(this.pageObserver.stop(),this.cacheObserver.stop(),this.linkPrefetchObserver.stop(),this.formLinkClickObserver.stop(),this.linkClickObserver.stop(),this.formSubmitObserver.stop(),this.scrollObserver.stop(),this.streamObserver.stop(),this.frameRedirector.stop(),this.history.stop(),this.preloader.stop(),this.started=!1)}registerAdapter(t){this.adapter=t}visit(t,e={}){let i=e.frame?document.getElementById(e.frame):null;if(i instanceof V){let o=e.action||it(i);i.delegate.proposeVisitIfNavigatedWithAction(i,o),i.src=t.toString()}else this.navigator.proposeVisit(A(t),e)}refresh(t,e){!(e&&this.recentRequests.has(e))&&!this.navigator.currentVisit&&this.visit(t,{action:"replace",shouldCacheSnapshot:!1})}connectStreamSource(t){this.streamObserver.connectStreamSource(t)}disconnectStreamSource(t){this.streamObserver.disconnectStreamSource(t)}renderStreamMessage(t){this.streamMessageRenderer.render(f.wrap(t))}clearCache(){this.view.clearSnapshotCache()}setProgressBarDelay(t){console.warn("Please replace `session.setProgressBarDelay(delay)` with `session.progressBarDelay = delay`. The function is deprecated and will be removed in a future version of Turbo.`"),this.progressBarDelay=t}set progressBarDelay(t){R.drive.progressBarDelay=t}get progressBarDelay(){return R.drive.progressBarDelay}set drive(t){R.drive.enabled=t}get drive(){return R.drive.enabled}set formMode(t){R.forms.mode=t}get formMode(){return R.forms.mode}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}get pageRefreshDebouncePeriod(){return G(this,jt)}set pageRefreshDebouncePeriod(t){this.refresh=zo(this.debouncedRefresh.bind(this),t),u(this,jt,t)}shouldPreloadLink(t){let e=t.hasAttribute("data-turbo-method"),i=t.hasAttribute("data-turbo-stream"),o=t.getAttribute("data-turbo-frame"),a=o=="_top"?null:document.getElementById(o)||nt(t,"turbo-frame:not([disabled])");if(e||i||a instanceof V)return!1;{let s=new URL(t.href);return this.elementIsNavigatable(t)&&S(s,this.snapshot.rootLocation)}}historyPoppedToLocationWithRestorationIdentifierAndDirection(t,e,i){this.enabled?this.navigator.startVisit(t,e,{action:"restore",historyChanged:!0,direction:i}):this.adapter.pageInvalidated({reason:"turbo_disabled"})}scrollPositionChanged(t){this.history.updateRestorationData({scrollPosition:t})}willSubmitFormLinkToLocation(t,e){return this.elementIsNavigatable(t)&&S(e,this.snapshot.rootLocation)}submittedFormLinkToLocation(){}canPrefetchRequestToLocation(t,e){return this.elementIsNavigatable(t)&&S(e,this.snapshot.rootLocation)}willFollowLinkToLocation(t,e,i){return this.elementIsNavigatable(t)&&S(e,this.snapshot.rootLocation)&&this.applicationAllowsFollowingLinkToLocation(t,e,i)}followedLinkToLocation(t,e){let i=this.getActionForLink(t),o=t.hasAttribute("data-turbo-stream");this.visit(e.href,{action:i,acceptsStreamResponse:o})}allowsVisitingLocationWithAction(t,e){return this.locationWithActionIsSamePage(t,e)||this.applicationAllowsVisitingLocation(t)}visitProposedToLocation(t,e){db(t),this.adapter.visitProposedToLocation(t,e)}visitStarted(t){t.acceptsStreamResponse||(oe(document.documentElement),this.view.markVisitDirection(t.direction)),db(t.location),t.silent||this.notifyApplicationAfterVisitingLocation(t.location,t.action)}visitCompleted(t){this.view.unmarkVisitDirection(),ae(document.documentElement),this.notifyApplicationAfterPageLoad(t.getTimingMetrics())}locationWithActionIsSamePage(t,e){return this.navigator.locationWithActionIsSamePage(t,e)}visitScrolledToSamePageLocation(t,e){this.notifyApplicationAfterVisitingSamePageLocation(t,e)}willSubmitForm(t,e){let i=yi(t,e);return this.submissionIsNavigatable(t,e)&&S(A(i),this.snapshot.rootLocation)}formSubmitted(t,e){this.navigator.submitForm(t,e)}pageBecameInteractive(){this.view.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()}pageLoaded(){this.history.assumeControlOfScrollRestoration()}pageWillUnload(){this.history.relinquishControlOfScrollRestoration()}receivedMessageFromStream(t){this.renderStreamMessage(t)}viewWillCacheSnapshot(){this.navigator.currentVisit?.silent||this.notifyApplicationBeforeCachingSnapshot()}allowsImmediateRender({element:t},e){let i=this.notifyApplicationBeforeRender(t,e),{defaultPrevented:o,detail:{render:a}}=i;return this.view.renderer&&a&&(this.view.renderer.renderElement=a),!o}viewRenderedSnapshot(t,e,i){this.view.lastRenderedLocation=this.history.location,this.notifyApplicationAfterRender(i)}preloadOnLoadLinksForView(t){this.preloader.preloadOnLoadLinksForView(t)}viewInvalidated(t){this.adapter.pageInvalidated(t)}frameLoaded(t){this.notifyApplicationAfterFrameLoad(t)}frameRendered(t,e){this.notifyApplicationAfterFrameRender(t,e)}applicationAllowsFollowingLinkToLocation(t,e,i){return!this.notifyApplicationAfterClickingLinkToLocation(t,e,i).defaultPrevented}applicationAllowsVisitingLocation(t){return!this.notifyApplicationBeforeVisitingLocation(t).defaultPrevented}notifyApplicationAfterClickingLinkToLocation(t,e,i){return W("turbo:click",{target:t,detail:{url:e.href,originalEvent:i},cancelable:!0})}notifyApplicationBeforeVisitingLocation(t){return W("turbo:before-visit",{detail:{url:t.href},cancelable:!0})}notifyApplicationAfterVisitingLocation(t,e){return W("turbo:visit",{detail:{url:t.href,action:e}})}notifyApplicationBeforeCachingSnapshot(){return W("turbo:before-cache")}notifyApplicationBeforeRender(t,e){return W("turbo:before-render",{detail:{newBody:t,...e},cancelable:!0})}notifyApplicationAfterRender(t){return W("turbo:render",{detail:{renderMethod:t}})}notifyApplicationAfterPageLoad(t={}){return W("turbo:load",{detail:{url:this.location.href,timing:t}})}notifyApplicationAfterVisitingSamePageLocation(t,e){dispatchEvent(new HashChangeEvent("hashchange",{oldURL:t.toString(),newURL:e.toString()}))}notifyApplicationAfterFrameLoad(t){return W("turbo:frame-load",{target:t})}notifyApplicationAfterFrameRender(t,e){return W("turbo:frame-render",{detail:{fetchResponse:t},target:e,cancelable:!0})}submissionIsNavigatable(t,e){if(R.forms.mode=="off")return!1;{let i=e?this.elementIsNavigatable(e):!0;return R.forms.mode=="optin"?i&&t.closest('[data-turbo="true"]')!=null:i&&this.elementIsNavigatable(t)}}elementIsNavigatable(t){let e=nt(t,"[data-turbo]"),i=nt(t,"turbo-frame");return R.drive.enabled||i?e?e.getAttribute("data-turbo")!="false":!0:e?e.getAttribute("data-turbo")=="true":!1}getActionForLink(t){return it(t)||"advance"}get snapshot(){return this.view.snapshot}};jt=new WeakMap;function db(b){Object.defineProperties(b,fa)}var fa={absoluteURL:{get(){return this.toString()}}},B=new Ci(Rb),{cache:Ha,navigator:wa}=B;function Hb(){B.start()}function Sa(b){B.registerAdapter(b)}function za(b,t){B.visit(b,t)}function wb(b){B.connectStreamSource(b)}function Sb(b){B.disconnectStreamSource(b)}function ja(b){B.renderStreamMessage(b)}function Ta(){console.warn("Please replace `Turbo.clearCache()` with `Turbo.cache.clear()`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),B.clearCache()}function Ea(b){console.warn("Please replace `Turbo.setProgressBarDelay(delay)` with `Turbo.config.drive.progressBarDelay = delay`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),R.drive.progressBarDelay=b}function Da(b){console.warn("Please replace `Turbo.setConfirmMethod(confirmMethod)` with `Turbo.config.forms.confirm = confirmMethod`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),R.forms.confirm=b}function Ma(b){console.warn("Please replace `Turbo.setFormMode(mode)` with `Turbo.config.forms.mode = mode`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),R.forms.mode=b}var Ka=Object.freeze({__proto__:null,navigator:wa,session:B,cache:Ha,PageRenderer:Vt,PageSnapshot:x,FrameRenderer:xt,fetch:Ab,config:R,start:Hb,registerAdapter:Sa,visit:za,connectStreamSource:wb,disconnectStreamSource:Sb,renderStreamMessage:ja,clearCache:Ta,setProgressBarDelay:Ea,setConfirmMethod:Da,setFormMode:Ma}),hi=class extends Error{},pt,J,T,Tt,Ct,ht,E,ct,Be,zb,Fe,jb,Xe,Tb,ye,Eb,Re,Db,Ae,Mb,ve,Kb,Et,Wi,D,lt,Ye,Pb,ut,ie,Qe,qb,xe,$b,Ve,_b,ui=class{constructor(t){Z(this,E);Z(this,Be);Z(this,Fe);Z(this,Xe);Z(this,ye);Z(this,Re);Z(this,Ae);Z(this,ve);Z(this,Et);Z(this,D);Z(this,Ye);Z(this,ut);Z(this,Qe);Z(this,xe);Z(this,Ve);g(this,"fetchResponseLoaded",t=>Promise.resolve());Z(this,pt,null);Z(this,J,()=>{});Z(this,T,!1);Z(this,Tt,!1);Z(this,Ct,new Set);Z(this,ht,!1);g(this,"action",null);g(this,"visitCachedSnapshot",({element:t})=>{let e=t.querySelector("#"+this.element.id);e&&this.previousFrameElement&&e.replaceChildren(...this.previousFrameElement.children),delete this.previousFrameElement});this.element=t,this.view=new Ke(this,this.element),this.appearanceObserver=new De(this,this.element),this.formLinkClickObserver=new ge(this,this.element),this.linkInterceptor=new le(this,this.element),this.restorationIdentifier=M(),this.formSubmitObserver=new Yt(this,this.element)}connect(){G(this,T)||(u(this,T,!0),this.loadingStyle==st.lazy?this.appearanceObserver.start():p(this,E,ct).call(this),this.formLinkClickObserver.start(),this.linkInterceptor.start(),this.formSubmitObserver.start())}disconnect(){G(this,T)&&(u(this,T,!1),this.appearanceObserver.stop(),this.formLinkClickObserver.stop(),this.linkInterceptor.stop(),this.formSubmitObserver.stop())}disabledChanged(){this.loadingStyle==st.eager&&p(this,E,ct).call(this)}sourceURLChanged(){p(this,Qe,qb).call(this,"src")||(this.element.isConnected&&(this.complete=!1),(this.loadingStyle==st.eager||G(this,Tt))&&p(this,E,ct).call(this))}sourceURLReloaded(){let{refresh:t,src:e}=this.element;return u(this,ht,e&&t==="morph"),this.element.removeAttribute("complete"),this.element.src=null,this.element.src=e,this.element.loaded}loadingStyleChanged(){this.loadingStyle==st.lazy?this.appearanceObserver.start():(this.appearanceObserver.stop(),p(this,E,ct).call(this))}async loadResponse(t){(t.redirected||t.succeeded&&t.isHTML)&&(this.sourceURL=t.response.url);try{let e=await t.responseHTML;if(e){let i=Cb(e);x.fromDocument(i).isVisitable?await p(this,Be,zb).call(this,t,i):await p(this,ye,Eb).call(this,t)}}finally{u(this,ht,!1),this.fetchResponseLoaded=()=>Promise.resolve()}}elementAppearedInViewport(t){this.proposeVisitIfNavigatedWithAction(t,it(t)),p(this,E,ct).call(this)}willSubmitFormLinkToLocation(t){return p(this,ut,ie).call(this,t)}submittedFormLinkToLocation(t,e,i){let o=p(this,D,lt).call(this,t);o&&i.setAttribute("data-turbo-frame",o.id)}shouldInterceptLinkClick(t,e,i){return p(this,ut,ie).call(this,t)}linkClickIntercepted(t,e){p(this,Xe,Tb).call(this,t,e)}willSubmitForm(t,e){return t.closest("turbo-frame")==this.element&&p(this,ut,ie).call(this,t,e)}formSubmitted(t,e){this.formSubmission&&this.formSubmission.stop(),this.formSubmission=new re(this,t,e);let{fetchRequest:i}=this.formSubmission;this.prepareRequest(i),this.formSubmission.start()}prepareRequest(t){t.headers["Turbo-Frame"]=this.id,this.currentNavigationElement?.hasAttribute("data-turbo-stream")&&t.acceptResponseType(f.contentType)}requestStarted(t){oe(this.element)}requestPreventedHandlingResponse(t,e){G(this,J).call(this)}async requestSucceededWithResponse(t,e){await this.loadResponse(e),G(this,J).call(this)}async requestFailedWithResponse(t,e){await this.loadResponse(e),G(this,J).call(this)}requestErrored(t,e){console.error(e),G(this,J).call(this)}requestFinished(t){ae(this.element)}formSubmissionStarted({formElement:t}){oe(t,p(this,D,lt).call(this,t))}formSubmissionSucceededWithResponse(t,e){let i=p(this,D,lt).call(this,t.formElement,t.submitter);i.delegate.proposeVisitIfNavigatedWithAction(i,it(t.submitter,t.formElement,i)),i.delegate.loadResponse(e),t.isSafe||B.clearCache()}formSubmissionFailedWithResponse(t,e){this.element.delegate.loadResponse(e),B.clearCache()}formSubmissionErrored(t,e){console.error(e)}formSubmissionFinished({formElement:t}){ae(t,p(this,D,lt).call(this,t))}allowsImmediateRender({element:t},e){let i=W("turbo:before-frame-render",{target:this.element,detail:{newFrame:t,...e},cancelable:!0}),{defaultPrevented:o,detail:{render:a}}=i;return this.view.renderer&&a&&(this.view.renderer.renderElement=a),!o}viewRenderedSnapshot(t,e,i){}preloadOnLoadLinksForView(t){B.preloadOnLoadLinksForView(t)}viewInvalidated(){}willRenderFrame(t,e){this.previousFrameElement=t.cloneNode(!0)}proposeVisitIfNavigatedWithAction(t,e=null){if(this.action=e,this.action){let i=x.fromElement(t).clone(),{visitCachedSnapshot:o}=t.delegate;t.delegate.fetchResponseLoaded=async a=>{if(t.src){let{statusCode:s,redirected:m}=a,h=await a.responseHTML,v={response:{statusCode:s,redirected:m,responseHTML:h},visitCachedSnapshot:o,willRender:!1,updateHistory:!1,restorationIdentifier:this.restorationIdentifier,snapshot:i};this.action&&(v.action=this.action),B.visit(t.src,v)}}}}changeHistory(){if(this.action){let t=ub(this.action);B.history.update(t,A(this.element.src||""),this.restorationIdentifier)}}async extractForeignFrameElement(t){let e,i=CSS.escape(this.id);try{if(e=Ib(t.querySelector(`turbo-frame#${i}`),this.sourceURL),e)return e;if(e=Ib(t.querySelector(`turbo-frame[src][recurse~=${i}]`),this.sourceURL),e)return await e.loaded,await this.extractForeignFrameElement(e)}catch(o){return console.error(o),new V}return null}get id(){return this.element.id}get enabled(){return!this.element.disabled}get sourceURL(){if(this.element.src)return this.element.src}set sourceURL(t){p(this,xe,$b).call(this,"src",()=>{this.element.src=t??null})}get loadingStyle(){return this.element.loading}get isLoading(){return this.formSubmission!==void 0||G(this,J).call(this)!==void 0}get complete(){return this.element.hasAttribute("complete")}set complete(t){t?this.element.setAttribute("complete",""):this.element.removeAttribute("complete")}get isActive(){return this.element.isActive&&G(this,T)}get rootLocation(){let e=this.element.ownerDocument.querySelector('meta[name="turbo-root"]')?.content??"/";return A(e)}};pt=new WeakMap,J=new WeakMap,T=new WeakMap,Tt=new WeakMap,Ct=new WeakMap,ht=new WeakMap,E=new WeakSet,ct=async function(){this.enabled&&this.isActive&&!this.complete&&this.sourceURL&&(this.element.loaded=p(this,Fe,jb).call(this,A(this.sourceURL)),this.appearanceObserver.stop(),await this.element.loaded,u(this,Tt,!0))},Be=new WeakSet,zb=async function(t,e){let i=await this.extractForeignFrameElement(e.body),o=G(this,ht)?qe:xt;if(i){let a=new Bt(i),s=new o(this,this.view.snapshot,a,!1,!1);this.view.renderPromise&&await this.view.renderPromise,this.changeHistory(),await this.view.render(s),this.complete=!0,B.frameRendered(t,this.element),B.frameLoaded(this.element),await this.fetchResponseLoaded(t)}else p(this,Re,Db).call(this,t)&&p(this,Ae,Mb).call(this,t)},Fe=new WeakSet,jb=async function(t){let e=new ot(this,Q.get,t,new URLSearchParams,this.element);return G(this,pt)?.cancel(),u(this,pt,e),new Promise(i=>{u(this,J,()=>{u(this,J,()=>{}),u(this,pt,null),i()}),e.perform()})},Xe=new WeakSet,Tb=function(t,e,i){let o=p(this,D,lt).call(this,t,i);o.delegate.proposeVisitIfNavigatedWithAction(o,it(i,t,o)),p(this,Ve,_b).call(this,t,()=>{o.src=e})},ye=new WeakSet,Eb=async function(t){console.warn(`The response (${t.statusCode}) from <turbo-frame id="${this.element.id}"> is performing a full page visit due to turbo-visit-control.`),await p(this,Et,Wi).call(this,t.response)},Re=new WeakSet,Db=function(t){this.element.setAttribute("complete","");let e=t.response,i=async(a,s)=>{a instanceof Response?p(this,Et,Wi).call(this,a):B.visit(a,s)};return!W("turbo:frame-missing",{target:this.element,detail:{response:e,visit:i},cancelable:!0}).defaultPrevented},Ae=new WeakSet,Mb=function(t){this.view.missing(),p(this,ve,Kb).call(this,t)},ve=new WeakSet,Kb=function(t){let e=`The response (${t.statusCode}) did not contain the expected <turbo-frame id="${this.element.id}"> and will be ignored. To perform a full page visit instead, set turbo-visit-control to reload.`;throw new hi(e)},Et=new WeakSet,Wi=async function(t){let e=new vt(t),i=await e.responseHTML,{location:o,redirected:a,statusCode:s}=e;return B.visit(o,{response:{redirected:a,statusCode:s,responseHTML:i}})},D=new WeakSet,lt=function(t,e){let i=be("data-turbo-frame",e,t)||this.element.getAttribute("target");return mb(i)??this.element},Ye=new WeakSet,Pb=function(t,e){let i=yi(t,e);return S(A(i),this.rootLocation)},ut=new WeakSet,ie=function(t,e){let i=be("data-turbo-frame",e,t)||this.element.getAttribute("target");if(t instanceof HTMLFormElement&&!p(this,Ye,Pb).call(this,t,e)||!this.enabled||i=="_top")return!1;if(i){let o=mb(i);if(o)return!o.disabled}return!(!B.elementIsNavigatable(t)||e&&!B.elementIsNavigatable(e))},Qe=new WeakSet,qb=function(t){return G(this,Ct).has(t)},xe=new WeakSet,$b=function(t,e){G(this,Ct).add(t),e(),G(this,Ct).delete(t)},Ve=new WeakSet,_b=function(t,e){this.currentNavigationElement=t,e(),delete this.currentNavigationElement};function mb(b){if(b!=null){let t=document.getElementById(b);if(t instanceof V)return t}}function Ib(b,t){if(b){let e=b.getAttribute("src");if(e!=null&&t!=null&&Mo(e,t))throw new Error(`Matching <turbo-frame id="${b.id}"> element has a source URL which references itself`);if(b.ownerDocument!==document&&(b=document.importNode(b,!0)),b instanceof V)return b.connectedCallback(),b.disconnectedCallback(),b}}var to={after(){this.targetElements.forEach(b=>b.parentElement?.insertBefore(this.templateContent,b.nextSibling))},append(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(b=>b.append(this.templateContent))},before(){this.targetElements.forEach(b=>b.parentElement?.insertBefore(this.templateContent,b))},prepend(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(b=>b.prepend(this.templateContent))},remove(){this.targetElements.forEach(b=>b.remove())},replace(){let b=this.getAttribute("method");this.targetElements.forEach(t=>{b==="morph"?vi(t,this.templateContent):t.replaceWith(this.templateContent)})},update(){let b=this.getAttribute("method");this.targetElements.forEach(t=>{b==="morph"?Jb(t,this.templateContent):(t.innerHTML="",t.append(this.templateContent))})},refresh(){B.refresh(this.baseURI,this.requestId)}},et,yt,Yi=class Yi extends HTMLElement{constructor(){super(...arguments);Z(this,et)}static async renderElement(e){await e.performAction()}async connectedCallback(){try{await this.render()}catch(e){console.error(e)}finally{this.disconnect()}}async render(){return this.renderPromise??(this.renderPromise=(async()=>{let e=this.beforeRenderEvent;this.dispatchEvent(e)&&(await Rt(),await e.detail.render(this))})())}disconnect(){try{this.remove()}catch{}}removeDuplicateTargetChildren(){this.duplicateChildren.forEach(e=>e.remove())}get duplicateChildren(){let e=this.targetElements.flatMap(o=>[...o.children]).filter(o=>!!o.id),i=[...this.templateContent?.children||[]].filter(o=>!!o.id).map(o=>o.id);return e.filter(o=>i.includes(o.id))}get performAction(){if(this.action){let e=to[this.action];if(e)return e;p(this,et,yt).call(this,"unknown action")}p(this,et,yt).call(this,"action attribute is missing")}get targetElements(){if(this.target)return this.targetElementsById;if(this.targets)return this.targetElementsByQuery;p(this,et,yt).call(this,"target or targets attribute is missing")}get templateContent(){return this.templateElement.content.cloneNode(!0)}get templateElement(){if(this.firstElementChild===null){let e=this.ownerDocument.createElement("template");return this.appendChild(e),e}else if(this.firstElementChild instanceof HTMLTemplateElement)return this.firstElementChild;p(this,et,yt).call(this,"first child element must be a <template> element")}get action(){return this.getAttribute("action")}get target(){return this.getAttribute("target")}get targets(){return this.getAttribute("targets")}get requestId(){return this.getAttribute("request-id")}get description(){return(this.outerHTML.match(/<[^>]+>/)??[])[0]??"<turbo-stream>"}get beforeRenderEvent(){return new CustomEvent("turbo:before-stream-render",{bubbles:!0,cancelable:!0,detail:{newStream:this,render:Yi.renderElement}})}get targetElementsById(){let e=this.ownerDocument?.getElementById(this.target);return e!==null?[e]:[]}get targetElementsByQuery(){let e=this.ownerDocument?.querySelectorAll(this.targets);return e.length!==0?Array.prototype.slice.call(e):[]}};et=new WeakSet,yt=function(e){throw new Error(`${this.description}: ${e}`)};var Bi=Yi,Fi=class extends HTMLElement{constructor(){super(...arguments);g(this,"streamSource",null)}connectedCallback(){this.streamSource=this.src.match(/^ws{1,2}:/)?new WebSocket(this.src):new EventSource(this.src),wb(this.streamSource)}disconnectedCallback(){this.streamSource&&(this.streamSource.close(),Sb(this.streamSource))}get src(){return this.getAttribute("src")||""}};V.delegateConstructor=ui;customElements.get("turbo-frame")===void 0&&customElements.define("turbo-frame",V);customElements.get("turbo-stream")===void 0&&customElements.define("turbo-stream",Bi);customElements.get("turbo-stream-source")===void 0&&customElements.define("turbo-stream-source",Fi);(()=>{let b=document.currentScript;if(b&&!b.hasAttribute("data-turbo-suppress-warning"))for(b=b.parentElement;b;){if(b==document.body)return console.warn(hb`
        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!

        Load your application’s JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.

        For more information, see: https://turbo.hotwired.dev/handbook/building#working-with-script-elements

        ——
        Suppress this warning by adding a "data-turbo-suppress-warning" attribute to: %s
      `,b.outerHTML);b=b.parentElement}})();window.Turbo={...Ka,StreamActions:to};Hb();var Qi=class{constructor(t,e,i){this.eventTarget=t,this.eventName=e,this.eventOptions=i,this.unorderedBindings=new Set}connect(){this.eventTarget.addEventListener(this.eventName,this,this.eventOptions)}disconnect(){this.eventTarget.removeEventListener(this.eventName,this,this.eventOptions)}bindingConnected(t){this.unorderedBindings.add(t)}bindingDisconnected(t){this.unorderedBindings.delete(t)}handleEvent(t){let e=Pa(t);for(let i of this.bindings){if(e.immediatePropagationStopped)break;i.handleEvent(e)}}hasBindings(){return this.unorderedBindings.size>0}get bindings(){return Array.from(this.unorderedBindings).sort((t,e)=>{let i=t.index,o=e.index;return i<o?-1:i>o?1:0})}};function Pa(b){if("immediatePropagationStopped"in b)return b;{let{stopImmediatePropagation:t}=b;return Object.assign(b,{immediatePropagationStopped:!1,stopImmediatePropagation(){this.immediatePropagationStopped=!0,t.call(this)}})}}var xi=class{constructor(t){this.application=t,this.eventListenerMaps=new Map,this.started=!1}start(){this.started||(this.started=!0,this.eventListeners.forEach(t=>t.connect()))}stop(){this.started&&(this.started=!1,this.eventListeners.forEach(t=>t.disconnect()))}get eventListeners(){return Array.from(this.eventListenerMaps.values()).reduce((t,e)=>t.concat(Array.from(e.values())),[])}bindingConnected(t){this.fetchEventListenerForBinding(t).bindingConnected(t)}bindingDisconnected(t,e=!1){this.fetchEventListenerForBinding(t).bindingDisconnected(t),e&&this.clearEventListenersForBinding(t)}handleError(t,e,i={}){this.application.handleError(t,`Error ${e}`,i)}clearEventListenersForBinding(t){let e=this.fetchEventListenerForBinding(t);e.hasBindings()||(e.disconnect(),this.removeMappedEventListenerFor(t))}removeMappedEventListenerFor(t){let{eventTarget:e,eventName:i,eventOptions:o}=t,a=this.fetchEventListenerMapForEventTarget(e),s=this.cacheKey(i,o);a.delete(s),a.size==0&&this.eventListenerMaps.delete(e)}fetchEventListenerForBinding(t){let{eventTarget:e,eventName:i,eventOptions:o}=t;return this.fetchEventListener(e,i,o)}fetchEventListener(t,e,i){let o=this.fetchEventListenerMapForEventTarget(t),a=this.cacheKey(e,i),s=o.get(a);return s||(s=this.createEventListener(t,e,i),o.set(a,s)),s}createEventListener(t,e,i){let o=new Qi(t,e,i);return this.started&&o.connect(),o}fetchEventListenerMapForEventTarget(t){let e=this.eventListenerMaps.get(t);return e||(e=new Map,this.eventListenerMaps.set(t,e)),e}cacheKey(t,e){let i=[t];return Object.keys(e).sort().forEach(o=>{i.push(`${e[o]?"":"!"}${o}`)}),i.join(":")}},qa={stop({event:b,value:t}){return t&&b.stopPropagation(),!0},prevent({event:b,value:t}){return t&&b.preventDefault(),!0},self({event:b,value:t,element:e}){return t?e===b.target:!0}},$a=/^(?:(?:([^.]+?)\+)?(.+?)(?:\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/;function _a(b){let e=b.trim().match($a)||[],i=e[2],o=e[3];return o&&!["keydown","keyup","keypress"].includes(i)&&(i+=`.${o}`,o=""),{eventTarget:tr(e[4]),eventName:i,eventOptions:e[7]?er(e[7]):{},identifier:e[5],methodName:e[6],keyFilter:e[1]||o}}function tr(b){if(b=="window")return window;if(b=="document")return document}function er(b){return b.split(":").reduce((t,e)=>Object.assign(t,{[e.replace(/^!/,"")]:!/^!/.test(e)}),{})}function ir(b){if(b==window)return"window";if(b==document)return"document"}function _i(b){return b.replace(/(?:[_-])([a-z0-9])/g,(t,e)=>e.toUpperCase())}function Vi(b){return _i(b.replace(/--/g,"-").replace(/__/g,"_"))}function Mt(b){return b.charAt(0).toUpperCase()+b.slice(1)}function go(b){return b.replace(/([A-Z])/g,(t,e)=>`-${e.toLowerCase()}`)}function br(b){return b.match(/[^\s]+/g)||[]}function eo(b){return b!=null}function Ji(b,t){return Object.prototype.hasOwnProperty.call(b,t)}var io=["meta","ctrl","alt","shift"],ki=class{constructor(t,e,i,o){this.element=t,this.index=e,this.eventTarget=i.eventTarget||t,this.eventName=i.eventName||or(t)||Je("missing event name"),this.eventOptions=i.eventOptions||{},this.identifier=i.identifier||Je("missing identifier"),this.methodName=i.methodName||Je("missing method name"),this.keyFilter=i.keyFilter||"",this.schema=o}static forToken(t,e){return new this(t.element,t.index,_a(t.content),e)}toString(){let t=this.keyFilter?`.${this.keyFilter}`:"",e=this.eventTargetName?`@${this.eventTargetName}`:"";return`${this.eventName}${t}${e}->${this.identifier}#${this.methodName}`}shouldIgnoreKeyboardEvent(t){if(!this.keyFilter)return!1;let e=this.keyFilter.split("+");if(this.keyFilterDissatisfied(t,e))return!0;let i=e.filter(o=>!io.includes(o))[0];return i?(Ji(this.keyMappings,i)||Je(`contains unknown key filter: ${this.keyFilter}`),this.keyMappings[i].toLowerCase()!==t.key.toLowerCase()):!1}shouldIgnoreMouseEvent(t){if(!this.keyFilter)return!1;let e=[this.keyFilter];return!!this.keyFilterDissatisfied(t,e)}get params(){let t={},e=new RegExp(`^data-${this.identifier}-(.+)-param$`,"i");for(let{name:i,value:o}of Array.from(this.element.attributes)){let a=i.match(e),s=a&&a[1];s&&(t[_i(s)]=ar(o))}return t}get eventTargetName(){return ir(this.eventTarget)}get keyMappings(){return this.schema.keyMappings}keyFilterDissatisfied(t,e){let[i,o,a,s]=io.map(m=>e.includes(m));return t.metaKey!==i||t.ctrlKey!==o||t.altKey!==a||t.shiftKey!==s}},bo={a:()=>"click",button:()=>"click",form:()=>"submit",details:()=>"toggle",input:b=>b.getAttribute("type")=="submit"?"click":"input",select:()=>"change",textarea:()=>"input"};function or(b){let t=b.tagName.toLowerCase();if(t in bo)return bo[t](b)}function Je(b){throw new Error(b)}function ar(b){try{return JSON.parse(b)}catch{return b}}var Li=class{constructor(t,e){this.context=t,this.action=e}get index(){return this.action.index}get eventTarget(){return this.action.eventTarget}get eventOptions(){return this.action.eventOptions}get identifier(){return this.context.identifier}handleEvent(t){let e=this.prepareActionEvent(t);this.willBeInvokedByEvent(t)&&this.applyEventModifiers(e)&&this.invokeWithEvent(e)}get eventName(){return this.action.eventName}get method(){let t=this.controller[this.methodName];if(typeof t=="function")return t;throw new Error(`Action "${this.action}" references undefined method "${this.methodName}"`)}applyEventModifiers(t){let{element:e}=this.action,{actionDescriptorFilters:i}=this.context.application,{controller:o}=this.context,a=!0;for(let[s,m]of Object.entries(this.eventOptions))if(s in i){let h=i[s];a=a&&h({name:s,value:m,event:t,element:e,controller:o})}else continue;return a}prepareActionEvent(t){return Object.assign(t,{params:this.action.params})}invokeWithEvent(t){let{target:e,currentTarget:i}=t;try{this.method.call(this.controller,t),this.context.logDebugActivity(this.methodName,{event:t,target:e,currentTarget:i,action:this.methodName})}catch(o){let{identifier:a,controller:s,element:m,index:h}=this,F={identifier:a,controller:s,element:m,index:h,event:t};this.context.handleError(o,`invoking action "${this.action}"`,F)}}willBeInvokedByEvent(t){let e=t.target;return t instanceof KeyboardEvent&&this.action.shouldIgnoreKeyboardEvent(t)||t instanceof MouseEvent&&this.action.shouldIgnoreMouseEvent(t)?!1:this.element===e?!0:e instanceof Element&&this.element.contains(e)?this.scope.containsElement(e):this.scope.containsElement(this.action.element)}get controller(){return this.context.controller}get methodName(){return this.action.methodName}get element(){return this.scope.element}get scope(){return this.context.scope}},ke=class{constructor(t,e){this.mutationObserverInit={attributes:!0,childList:!0,subtree:!0},this.element=t,this.started=!1,this.delegate=e,this.elements=new Set,this.mutationObserver=new MutationObserver(i=>this.processMutations(i))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,this.mutationObserverInit),this.refresh())}pause(t){this.started&&(this.mutationObserver.disconnect(),this.started=!1),t(),this.started||(this.mutationObserver.observe(this.element,this.mutationObserverInit),this.started=!0)}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started){let t=new Set(this.matchElementsInTree());for(let e of Array.from(this.elements))t.has(e)||this.removeElement(e);for(let e of Array.from(t))this.addElement(e)}}processMutations(t){if(this.started)for(let e of t)this.processMutation(e)}processMutation(t){t.type=="attributes"?this.processAttributeChange(t.target,t.attributeName):t.type=="childList"&&(this.processRemovedNodes(t.removedNodes),this.processAddedNodes(t.addedNodes))}processAttributeChange(t,e){this.elements.has(t)?this.delegate.elementAttributeChanged&&this.matchElement(t)?this.delegate.elementAttributeChanged(t,e):this.removeElement(t):this.matchElement(t)&&this.addElement(t)}processRemovedNodes(t){for(let e of Array.from(t)){let i=this.elementFromNode(e);i&&this.processTree(i,this.removeElement)}}processAddedNodes(t){for(let e of Array.from(t)){let i=this.elementFromNode(e);i&&this.elementIsActive(i)&&this.processTree(i,this.addElement)}}matchElement(t){return this.delegate.matchElement(t)}matchElementsInTree(t=this.element){return this.delegate.matchElementsInTree(t)}processTree(t,e){for(let i of this.matchElementsInTree(t))e.call(this,i)}elementFromNode(t){if(t.nodeType==Node.ELEMENT_NODE)return t}elementIsActive(t){return t.isConnected!=this.element.isConnected?!1:this.element.contains(t)}addElement(t){this.elements.has(t)||this.elementIsActive(t)&&(this.elements.add(t),this.delegate.elementMatched&&this.delegate.elementMatched(t))}removeElement(t){this.elements.has(t)&&(this.elements.delete(t),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(t))}},Le=class{constructor(t,e,i){this.attributeName=e,this.delegate=i,this.elementObserver=new ke(t,this)}get element(){return this.elementObserver.element}get selector(){return`[${this.attributeName}]`}start(){this.elementObserver.start()}pause(t){this.elementObserver.pause(t)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get started(){return this.elementObserver.started}matchElement(t){return t.hasAttribute(this.attributeName)}matchElementsInTree(t){let e=this.matchElement(t)?[t]:[],i=Array.from(t.querySelectorAll(this.selector));return e.concat(i)}elementMatched(t){this.delegate.elementMatchedAttribute&&this.delegate.elementMatchedAttribute(t,this.attributeName)}elementUnmatched(t){this.delegate.elementUnmatchedAttribute&&this.delegate.elementUnmatchedAttribute(t,this.attributeName)}elementAttributeChanged(t,e){this.delegate.elementAttributeValueChanged&&this.attributeName==e&&this.delegate.elementAttributeValueChanged(t,e)}};function rr(b,t,e){no(b,t).add(e)}function cr(b,t,e){no(b,t).delete(e),lr(b,t)}function no(b,t){let e=b.get(t);return e||(e=new Set,b.set(t,e)),e}function lr(b,t){let e=b.get(t);e!=null&&e.size==0&&b.delete(t)}var H=class{constructor(){this.valuesByKey=new Map}get keys(){return Array.from(this.valuesByKey.keys())}get values(){return Array.from(this.valuesByKey.values()).reduce((e,i)=>e.concat(Array.from(i)),[])}get size(){return Array.from(this.valuesByKey.values()).reduce((e,i)=>e+i.size,0)}add(t,e){rr(this.valuesByKey,t,e)}delete(t,e){cr(this.valuesByKey,t,e)}has(t,e){let i=this.valuesByKey.get(t);return i!=null&&i.has(e)}hasKey(t){return this.valuesByKey.has(t)}hasValue(t){return Array.from(this.valuesByKey.values()).some(i=>i.has(t))}getValuesForKey(t){let e=this.valuesByKey.get(t);return e?Array.from(e):[]}getKeysForValue(t){return Array.from(this.valuesByKey).filter(([e,i])=>i.has(t)).map(([e,i])=>e)}};var Ui=class{constructor(t,e,i,o){this._selector=e,this.details=o,this.elementObserver=new ke(t,this),this.delegate=i,this.matchesByElement=new H}get started(){return this.elementObserver.started}get selector(){return this._selector}set selector(t){this._selector=t,this.refresh()}start(){this.elementObserver.start()}pause(t){this.elementObserver.pause(t)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get element(){return this.elementObserver.element}matchElement(t){let{selector:e}=this;if(e){let i=t.matches(e);return this.delegate.selectorMatchElement?i&&this.delegate.selectorMatchElement(t,this.details):i}else return!1}matchElementsInTree(t){let{selector:e}=this;if(e){let i=this.matchElement(t)?[t]:[],o=Array.from(t.querySelectorAll(e)).filter(a=>this.matchElement(a));return i.concat(o)}else return[]}elementMatched(t){let{selector:e}=this;e&&this.selectorMatched(t,e)}elementUnmatched(t){let e=this.matchesByElement.getKeysForValue(t);for(let i of e)this.selectorUnmatched(t,i)}elementAttributeChanged(t,e){let{selector:i}=this;if(i){let o=this.matchElement(t),a=this.matchesByElement.has(i,t);o&&!a?this.selectorMatched(t,i):!o&&a&&this.selectorUnmatched(t,i)}}selectorMatched(t,e){this.delegate.selectorMatched(t,e,this.details),this.matchesByElement.add(e,t)}selectorUnmatched(t,e){this.delegate.selectorUnmatched(t,e,this.details),this.matchesByElement.delete(e,t)}},Oi=class{constructor(t,e){this.element=t,this.delegate=e,this.started=!1,this.stringMap=new Map,this.mutationObserver=new MutationObserver(i=>this.processMutations(i))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0,attributeOldValue:!0}),this.refresh())}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started)for(let t of this.knownAttributeNames)this.refreshAttribute(t,null)}processMutations(t){if(this.started)for(let e of t)this.processMutation(e)}processMutation(t){let e=t.attributeName;e&&this.refreshAttribute(e,t.oldValue)}refreshAttribute(t,e){let i=this.delegate.getStringMapKeyForAttribute(t);if(i!=null){this.stringMap.has(t)||this.stringMapKeyAdded(i,t);let o=this.element.getAttribute(t);if(this.stringMap.get(t)!=o&&this.stringMapValueChanged(o,i,e),o==null){let a=this.stringMap.get(t);this.stringMap.delete(t),a&&this.stringMapKeyRemoved(i,t,a)}else this.stringMap.set(t,o)}}stringMapKeyAdded(t,e){this.delegate.stringMapKeyAdded&&this.delegate.stringMapKeyAdded(t,e)}stringMapValueChanged(t,e,i){this.delegate.stringMapValueChanged&&this.delegate.stringMapValueChanged(t,e,i)}stringMapKeyRemoved(t,e,i){this.delegate.stringMapKeyRemoved&&this.delegate.stringMapKeyRemoved(t,e,i)}get knownAttributeNames(){return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)))}get currentAttributeNames(){return Array.from(this.element.attributes).map(t=>t.name)}get recordedAttributeNames(){return Array.from(this.stringMap.keys())}},Ue=class{constructor(t,e,i){this.attributeObserver=new Le(t,e,this),this.delegate=i,this.tokensByElement=new H}get started(){return this.attributeObserver.started}start(){this.attributeObserver.start()}pause(t){this.attributeObserver.pause(t)}stop(){this.attributeObserver.stop()}refresh(){this.attributeObserver.refresh()}get element(){return this.attributeObserver.element}get attributeName(){return this.attributeObserver.attributeName}elementMatchedAttribute(t){this.tokensMatched(this.readTokensForElement(t))}elementAttributeValueChanged(t){let[e,i]=this.refreshTokensForElement(t);this.tokensUnmatched(e),this.tokensMatched(i)}elementUnmatchedAttribute(t){this.tokensUnmatched(this.tokensByElement.getValuesForKey(t))}tokensMatched(t){t.forEach(e=>this.tokenMatched(e))}tokensUnmatched(t){t.forEach(e=>this.tokenUnmatched(e))}tokenMatched(t){this.delegate.tokenMatched(t),this.tokensByElement.add(t.element,t)}tokenUnmatched(t){this.delegate.tokenUnmatched(t),this.tokensByElement.delete(t.element,t)}refreshTokensForElement(t){let e=this.tokensByElement.getValuesForKey(t),i=this.readTokensForElement(t),o=gr(e,i).findIndex(([a,s])=>!nr(a,s));return o==-1?[[],[]]:[e.slice(o),i.slice(o)]}readTokensForElement(t){let e=this.attributeName,i=t.getAttribute(e)||"";return sr(i,t,e)}};function sr(b,t,e){return b.trim().split(/\s+/).filter(i=>i.length).map((i,o)=>({element:t,attributeName:e,content:i,index:o}))}function gr(b,t){let e=Math.max(b.length,t.length);return Array.from({length:e},(i,o)=>[b[o],t[o]])}function nr(b,t){return b&&t&&b.index==t.index&&b.content==t.content}var Oe=class{constructor(t,e,i){this.tokenListObserver=new Ue(t,e,this),this.delegate=i,this.parseResultsByToken=new WeakMap,this.valuesByTokenByElement=new WeakMap}get started(){return this.tokenListObserver.started}start(){this.tokenListObserver.start()}stop(){this.tokenListObserver.stop()}refresh(){this.tokenListObserver.refresh()}get element(){return this.tokenListObserver.element}get attributeName(){return this.tokenListObserver.attributeName}tokenMatched(t){let{element:e}=t,{value:i}=this.fetchParseResultForToken(t);i&&(this.fetchValuesByTokenForElement(e).set(t,i),this.delegate.elementMatchedValue(e,i))}tokenUnmatched(t){let{element:e}=t,{value:i}=this.fetchParseResultForToken(t);i&&(this.fetchValuesByTokenForElement(e).delete(t),this.delegate.elementUnmatchedValue(e,i))}fetchParseResultForToken(t){let e=this.parseResultsByToken.get(t);return e||(e=this.parseToken(t),this.parseResultsByToken.set(t,e)),e}fetchValuesByTokenForElement(t){let e=this.valuesByTokenByElement.get(t);return e||(e=new Map,this.valuesByTokenByElement.set(t,e)),e}parseToken(t){try{return{value:this.delegate.parseValueForToken(t)}}catch(e){return{error:e}}}},Ni=class{constructor(t,e){this.context=t,this.delegate=e,this.bindingsByAction=new Map}start(){this.valueListObserver||(this.valueListObserver=new Oe(this.element,this.actionAttribute,this),this.valueListObserver.start())}stop(){this.valueListObserver&&(this.valueListObserver.stop(),delete this.valueListObserver,this.disconnectAllActions())}get element(){return this.context.element}get identifier(){return this.context.identifier}get actionAttribute(){return this.schema.actionAttribute}get schema(){return this.context.schema}get bindings(){return Array.from(this.bindingsByAction.values())}connectAction(t){let e=new Li(this.context,t);this.bindingsByAction.set(t,e),this.delegate.bindingConnected(e)}disconnectAction(t){let e=this.bindingsByAction.get(t);e&&(this.bindingsByAction.delete(t),this.delegate.bindingDisconnected(e))}disconnectAllActions(){this.bindings.forEach(t=>this.delegate.bindingDisconnected(t,!0)),this.bindingsByAction.clear()}parseValueForToken(t){let e=ki.forToken(t,this.schema);if(e.identifier==this.identifier)return e}elementMatchedValue(t,e){this.connectAction(e)}elementUnmatchedValue(t,e){this.disconnectAction(e)}},fi=class{constructor(t,e){this.context=t,this.receiver=e,this.stringMapObserver=new Oi(this.element,this),this.valueDescriptorMap=this.controller.valueDescriptorMap}start(){this.stringMapObserver.start(),this.invokeChangedCallbacksForDefaultValues()}stop(){this.stringMapObserver.stop()}get element(){return this.context.element}get controller(){return this.context.controller}getStringMapKeyForAttribute(t){if(t in this.valueDescriptorMap)return this.valueDescriptorMap[t].name}stringMapKeyAdded(t,e){let i=this.valueDescriptorMap[e];this.hasValue(t)||this.invokeChangedCallback(t,i.writer(this.receiver[t]),i.writer(i.defaultValue))}stringMapValueChanged(t,e,i){let o=this.valueDescriptorNameMap[e];t!==null&&(i===null&&(i=o.writer(o.defaultValue)),this.invokeChangedCallback(e,t,i))}stringMapKeyRemoved(t,e,i){let o=this.valueDescriptorNameMap[t];this.hasValue(t)?this.invokeChangedCallback(t,o.writer(this.receiver[t]),i):this.invokeChangedCallback(t,o.writer(o.defaultValue),i)}invokeChangedCallbacksForDefaultValues(){for(let{key:t,name:e,defaultValue:i,writer:o}of this.valueDescriptors)i!=null&&!this.controller.data.has(t)&&this.invokeChangedCallback(e,o(i),void 0)}invokeChangedCallback(t,e,i){let o=`${t}Changed`,a=this.receiver[o];if(typeof a=="function"){let s=this.valueDescriptorNameMap[t];try{let m=s.reader(e),h=i;i&&(h=s.reader(i)),a.call(this.receiver,m,h)}catch(m){throw m instanceof TypeError&&(m.message=`Stimulus Value "${this.context.identifier}.${s.name}" - ${m.message}`),m}}}get valueDescriptors(){let{valueDescriptorMap:t}=this;return Object.keys(t).map(e=>t[e])}get valueDescriptorNameMap(){let t={};return Object.keys(this.valueDescriptorMap).forEach(e=>{let i=this.valueDescriptorMap[e];t[i.name]=i}),t}hasValue(t){let e=this.valueDescriptorNameMap[t],i=`has${Mt(e.name)}`;return this.receiver[i]}},Hi=class{constructor(t,e){this.context=t,this.delegate=e,this.targetsByName=new H}start(){this.tokenListObserver||(this.tokenListObserver=new Ue(this.element,this.attributeName,this),this.tokenListObserver.start())}stop(){this.tokenListObserver&&(this.disconnectAllTargets(),this.tokenListObserver.stop(),delete this.tokenListObserver)}tokenMatched({element:t,content:e}){this.scope.containsElement(t)&&this.connectTarget(t,e)}tokenUnmatched({element:t,content:e}){this.disconnectTarget(t,e)}connectTarget(t,e){var i;this.targetsByName.has(e,t)||(this.targetsByName.add(e,t),(i=this.tokenListObserver)===null||i===void 0||i.pause(()=>this.delegate.targetConnected(t,e)))}disconnectTarget(t,e){var i;this.targetsByName.has(e,t)&&(this.targetsByName.delete(e,t),(i=this.tokenListObserver)===null||i===void 0||i.pause(()=>this.delegate.targetDisconnected(t,e)))}disconnectAllTargets(){for(let t of this.targetsByName.keys)for(let e of this.targetsByName.getValuesForKey(t))this.disconnectTarget(e,t)}get attributeName(){return`data-${this.context.identifier}-target`}get element(){return this.context.element}get scope(){return this.context.scope}};function Kt(b,t){let e=mo(b);return Array.from(e.reduce((i,o)=>(mr(o,t).forEach(a=>i.add(a)),i),new Set))}function dr(b,t){return mo(b).reduce((i,o)=>(i.push(...Ir(o,t)),i),[])}function mo(b){let t=[];for(;b;)t.push(b),b=Object.getPrototypeOf(b);return t.reverse()}function mr(b,t){let e=b[t];return Array.isArray(e)?e:[]}function Ir(b,t){let e=b[t];return e?Object.keys(e).map(i=>[i,e[i]]):[]}var wi=class{constructor(t,e){this.started=!1,this.context=t,this.delegate=e,this.outletsByName=new H,this.outletElementsByName=new H,this.selectorObserverMap=new Map,this.attributeObserverMap=new Map}start(){this.started||(this.outletDefinitions.forEach(t=>{this.setupSelectorObserverForOutlet(t),this.setupAttributeObserverForOutlet(t)}),this.started=!0,this.dependentContexts.forEach(t=>t.refresh()))}refresh(){this.selectorObserverMap.forEach(t=>t.refresh()),this.attributeObserverMap.forEach(t=>t.refresh())}stop(){this.started&&(this.started=!1,this.disconnectAllOutlets(),this.stopSelectorObservers(),this.stopAttributeObservers())}stopSelectorObservers(){this.selectorObserverMap.size>0&&(this.selectorObserverMap.forEach(t=>t.stop()),this.selectorObserverMap.clear())}stopAttributeObservers(){this.attributeObserverMap.size>0&&(this.attributeObserverMap.forEach(t=>t.stop()),this.attributeObserverMap.clear())}selectorMatched(t,e,{outletName:i}){let o=this.getOutlet(t,i);o&&this.connectOutlet(o,t,i)}selectorUnmatched(t,e,{outletName:i}){let o=this.getOutletFromMap(t,i);o&&this.disconnectOutlet(o,t,i)}selectorMatchElement(t,{outletName:e}){let i=this.selector(e),o=this.hasOutlet(t,e),a=t.matches(`[${this.schema.controllerAttribute}~=${e}]`);return i?o&&a&&t.matches(i):!1}elementMatchedAttribute(t,e){let i=this.getOutletNameFromOutletAttributeName(e);i&&this.updateSelectorObserverForOutlet(i)}elementAttributeValueChanged(t,e){let i=this.getOutletNameFromOutletAttributeName(e);i&&this.updateSelectorObserverForOutlet(i)}elementUnmatchedAttribute(t,e){let i=this.getOutletNameFromOutletAttributeName(e);i&&this.updateSelectorObserverForOutlet(i)}connectOutlet(t,e,i){var o;this.outletElementsByName.has(i,e)||(this.outletsByName.add(i,t),this.outletElementsByName.add(i,e),(o=this.selectorObserverMap.get(i))===null||o===void 0||o.pause(()=>this.delegate.outletConnected(t,e,i)))}disconnectOutlet(t,e,i){var o;this.outletElementsByName.has(i,e)&&(this.outletsByName.delete(i,t),this.outletElementsByName.delete(i,e),(o=this.selectorObserverMap.get(i))===null||o===void 0||o.pause(()=>this.delegate.outletDisconnected(t,e,i)))}disconnectAllOutlets(){for(let t of this.outletElementsByName.keys)for(let e of this.outletElementsByName.getValuesForKey(t))for(let i of this.outletsByName.getValuesForKey(t))this.disconnectOutlet(i,e,t)}updateSelectorObserverForOutlet(t){let e=this.selectorObserverMap.get(t);e&&(e.selector=this.selector(t))}setupSelectorObserverForOutlet(t){let e=this.selector(t),i=new Ui(document.body,e,this,{outletName:t});this.selectorObserverMap.set(t,i),i.start()}setupAttributeObserverForOutlet(t){let e=this.attributeNameForOutletName(t),i=new Le(this.scope.element,e,this);this.attributeObserverMap.set(t,i),i.start()}selector(t){return this.scope.outlets.getSelectorForOutletName(t)}attributeNameForOutletName(t){return this.scope.schema.outletAttributeForScope(this.identifier,t)}getOutletNameFromOutletAttributeName(t){return this.outletDefinitions.find(e=>this.attributeNameForOutletName(e)===t)}get outletDependencies(){let t=new H;return this.router.modules.forEach(e=>{let i=e.definition.controllerConstructor;Kt(i,"outlets").forEach(a=>t.add(a,e.identifier))}),t}get outletDefinitions(){return this.outletDependencies.getKeysForValue(this.identifier)}get dependentControllerIdentifiers(){return this.outletDependencies.getValuesForKey(this.identifier)}get dependentContexts(){let t=this.dependentControllerIdentifiers;return this.router.contexts.filter(e=>t.includes(e.identifier))}hasOutlet(t,e){return!!this.getOutlet(t,e)||!!this.getOutletFromMap(t,e)}getOutlet(t,e){return this.application.getControllerForElementAndIdentifier(t,e)}getOutletFromMap(t,e){return this.outletsByName.getValuesForKey(e).find(i=>i.element===t)}get scope(){return this.context.scope}get schema(){return this.context.schema}get identifier(){return this.context.identifier}get application(){return this.context.application}get router(){return this.application.router}},Si=class{constructor(t,e){this.logDebugActivity=(i,o={})=>{let{identifier:a,controller:s,element:m}=this;o=Object.assign({identifier:a,controller:s,element:m},o),this.application.logDebugActivity(this.identifier,i,o)},this.module=t,this.scope=e,this.controller=new t.controllerConstructor(this),this.bindingObserver=new Ni(this,this.dispatcher),this.valueObserver=new fi(this,this.controller),this.targetObserver=new Hi(this,this),this.outletObserver=new wi(this,this);try{this.controller.initialize(),this.logDebugActivity("initialize")}catch(i){this.handleError(i,"initializing controller")}}connect(){this.bindingObserver.start(),this.valueObserver.start(),this.targetObserver.start(),this.outletObserver.start();try{this.controller.connect(),this.logDebugActivity("connect")}catch(t){this.handleError(t,"connecting controller")}}refresh(){this.outletObserver.refresh()}disconnect(){try{this.controller.disconnect(),this.logDebugActivity("disconnect")}catch(t){this.handleError(t,"disconnecting controller")}this.outletObserver.stop(),this.targetObserver.stop(),this.valueObserver.stop(),this.bindingObserver.stop()}get application(){return this.module.application}get identifier(){return this.module.identifier}get schema(){return this.application.schema}get dispatcher(){return this.application.dispatcher}get element(){return this.scope.element}get parentElement(){return this.element.parentElement}handleError(t,e,i={}){let{identifier:o,controller:a,element:s}=this;i=Object.assign({identifier:o,controller:a,element:s},i),this.application.handleError(t,`Error ${e}`,i)}targetConnected(t,e){this.invokeControllerMethod(`${e}TargetConnected`,t)}targetDisconnected(t,e){this.invokeControllerMethod(`${e}TargetDisconnected`,t)}outletConnected(t,e,i){this.invokeControllerMethod(`${Vi(i)}OutletConnected`,t,e)}outletDisconnected(t,e,i){this.invokeControllerMethod(`${Vi(i)}OutletDisconnected`,t,e)}invokeControllerMethod(t,...e){let i=this.controller;typeof i[t]=="function"&&i[t](...e)}};function Zr(b){return Gr(b,pr(b))}function Gr(b,t){let e=Wr(b),i=Cr(b.prototype,t);return Object.defineProperties(e.prototype,i),e}function pr(b){return Kt(b,"blessings").reduce((e,i)=>{let o=i(b);for(let a in o){let s=e[a]||{};e[a]=Object.assign(s,o[a])}return e},{})}function Cr(b,t){return ur(t).reduce((e,i)=>{let o=hr(b,t,i);return o&&Object.assign(e,{[i]:o}),e},{})}function hr(b,t,e){let i=Object.getOwnPropertyDescriptor(b,e);if(!(i&&"value"in i)){let a=Object.getOwnPropertyDescriptor(t,e).value;return i&&(a.get=i.get||a.get,a.set=i.set||a.set),a}}var ur=typeof Object.getOwnPropertySymbols=="function"?b=>[...Object.getOwnPropertyNames(b),...Object.getOwnPropertySymbols(b)]:Object.getOwnPropertyNames,Wr=(()=>{function b(e){function i(){return Reflect.construct(e,arguments,new.target)}return i.prototype=Object.create(e.prototype,{constructor:{value:i}}),Reflect.setPrototypeOf(i,e),i}function t(){let i=b(function(){this.a.call(this)});return i.prototype.a=function(){},new i}try{return t(),b}catch{return i=>class extends i{}}})();function Br(b){return{identifier:b.identifier,controllerConstructor:Zr(b.controllerConstructor)}}var zi=class{constructor(t,e){this.application=t,this.definition=Br(e),this.contextsByScope=new WeakMap,this.connectedContexts=new Set}get identifier(){return this.definition.identifier}get controllerConstructor(){return this.definition.controllerConstructor}get contexts(){return Array.from(this.connectedContexts)}connectContextForScope(t){let e=this.fetchContextForScope(t);this.connectedContexts.add(e),e.connect()}disconnectContextForScope(t){let e=this.contextsByScope.get(t);e&&(this.connectedContexts.delete(e),e.disconnect())}fetchContextForScope(t){let e=this.contextsByScope.get(t);return e||(e=new Si(this,t),this.contextsByScope.set(t,e)),e}},ji=class{constructor(t){this.scope=t}has(t){return this.data.has(this.getDataKey(t))}get(t){return this.getAll(t)[0]}getAll(t){let e=this.data.get(this.getDataKey(t))||"";return br(e)}getAttributeName(t){return this.data.getAttributeNameForKey(this.getDataKey(t))}getDataKey(t){return`${t}-class`}get data(){return this.scope.data}},Ti=class{constructor(t){this.scope=t}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get(t){let e=this.getAttributeNameForKey(t);return this.element.getAttribute(e)}set(t,e){let i=this.getAttributeNameForKey(t);return this.element.setAttribute(i,e),this.get(t)}has(t){let e=this.getAttributeNameForKey(t);return this.element.hasAttribute(e)}delete(t){if(this.has(t)){let e=this.getAttributeNameForKey(t);return this.element.removeAttribute(e),!0}else return!1}getAttributeNameForKey(t){return`data-${this.identifier}-${go(t)}`}},Ei=class{constructor(t){this.warnedKeysByObject=new WeakMap,this.logger=t}warn(t,e,i){let o=this.warnedKeysByObject.get(t);o||(o=new Set,this.warnedKeysByObject.set(t,o)),o.has(e)||(o.add(e),this.logger.warn(i,t))}};function Di(b,t){return`[${b}~="${t}"]`}var Mi=class{constructor(t){this.scope=t}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(t){return this.find(t)!=null}find(...t){return t.reduce((e,i)=>e||this.findTarget(i)||this.findLegacyTarget(i),void 0)}findAll(...t){return t.reduce((e,i)=>[...e,...this.findAllTargets(i),...this.findAllLegacyTargets(i)],[])}findTarget(t){let e=this.getSelectorForTargetName(t);return this.scope.findElement(e)}findAllTargets(t){let e=this.getSelectorForTargetName(t);return this.scope.findAllElements(e)}getSelectorForTargetName(t){let e=this.schema.targetAttributeForScope(this.identifier);return Di(e,t)}findLegacyTarget(t){let e=this.getLegacySelectorForTargetName(t);return this.deprecate(this.scope.findElement(e),t)}findAllLegacyTargets(t){let e=this.getLegacySelectorForTargetName(t);return this.scope.findAllElements(e).map(i=>this.deprecate(i,t))}getLegacySelectorForTargetName(t){let e=`${this.identifier}.${t}`;return Di(this.schema.targetAttribute,e)}deprecate(t,e){if(t){let{identifier:i}=this,o=this.schema.targetAttribute,a=this.schema.targetAttributeForScope(i);this.guide.warn(t,`target:${e}`,`Please replace ${o}="${i}.${e}" with ${a}="${e}". The ${o} attribute is deprecated and will be removed in a future version of Stimulus.`)}return t}get guide(){return this.scope.guide}},Ki=class{constructor(t,e){this.scope=t,this.controllerElement=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(t){return this.find(t)!=null}find(...t){return t.reduce((e,i)=>e||this.findOutlet(i),void 0)}findAll(...t){return t.reduce((e,i)=>[...e,...this.findAllOutlets(i)],[])}getSelectorForOutletName(t){let e=this.schema.outletAttributeForScope(this.identifier,t);return this.controllerElement.getAttribute(e)}findOutlet(t){let e=this.getSelectorForOutletName(t);if(e)return this.findElement(e,t)}findAllOutlets(t){let e=this.getSelectorForOutletName(t);return e?this.findAllElements(e,t):[]}findElement(t,e){return this.scope.queryElements(t).filter(o=>this.matchesElement(o,t,e))[0]}findAllElements(t,e){return this.scope.queryElements(t).filter(o=>this.matchesElement(o,t,e))}matchesElement(t,e,i){let o=t.getAttribute(this.scope.schema.controllerAttribute)||"";return t.matches(e)&&o.split(" ").includes(i)}},Pi=class b{constructor(t,e,i,o){this.targets=new Mi(this),this.classes=new ji(this),this.data=new Ti(this),this.containsElement=a=>a.closest(this.controllerSelector)===this.element,this.schema=t,this.element=e,this.identifier=i,this.guide=new Ei(o),this.outlets=new Ki(this.documentScope,e)}findElement(t){return this.element.matches(t)?this.element:this.queryElements(t).find(this.containsElement)}findAllElements(t){return[...this.element.matches(t)?[this.element]:[],...this.queryElements(t).filter(this.containsElement)]}queryElements(t){return Array.from(this.element.querySelectorAll(t))}get controllerSelector(){return Di(this.schema.controllerAttribute,this.identifier)}get isDocumentScope(){return this.element===document.documentElement}get documentScope(){return this.isDocumentScope?this:new b(this.schema,document.documentElement,this.identifier,this.guide.logger)}},qi=class{constructor(t,e,i){this.element=t,this.schema=e,this.delegate=i,this.valueListObserver=new Oe(this.element,this.controllerAttribute,this),this.scopesByIdentifierByElement=new WeakMap,this.scopeReferenceCounts=new WeakMap}start(){this.valueListObserver.start()}stop(){this.valueListObserver.stop()}get controllerAttribute(){return this.schema.controllerAttribute}parseValueForToken(t){let{element:e,content:i}=t;return this.parseValueForElementAndIdentifier(e,i)}parseValueForElementAndIdentifier(t,e){let i=this.fetchScopesByIdentifierForElement(t),o=i.get(e);return o||(o=this.delegate.createScopeForElementAndIdentifier(t,e),i.set(e,o)),o}elementMatchedValue(t,e){let i=(this.scopeReferenceCounts.get(e)||0)+1;this.scopeReferenceCounts.set(e,i),i==1&&this.delegate.scopeConnected(e)}elementUnmatchedValue(t,e){let i=this.scopeReferenceCounts.get(e);i&&(this.scopeReferenceCounts.set(e,i-1),i==1&&this.delegate.scopeDisconnected(e))}fetchScopesByIdentifierForElement(t){let e=this.scopesByIdentifierByElement.get(t);return e||(e=new Map,this.scopesByIdentifierByElement.set(t,e)),e}},$i=class{constructor(t){this.application=t,this.scopeObserver=new qi(this.element,this.schema,this),this.scopesByIdentifier=new H,this.modulesByIdentifier=new Map}get element(){return this.application.element}get schema(){return this.application.schema}get logger(){return this.application.logger}get controllerAttribute(){return this.schema.controllerAttribute}get modules(){return Array.from(this.modulesByIdentifier.values())}get contexts(){return this.modules.reduce((t,e)=>t.concat(e.contexts),[])}start(){this.scopeObserver.start()}stop(){this.scopeObserver.stop()}loadDefinition(t){this.unloadIdentifier(t.identifier);let e=new zi(this.application,t);this.connectModule(e);let i=t.controllerConstructor.afterLoad;i&&i.call(t.controllerConstructor,t.identifier,this.application)}unloadIdentifier(t){let e=this.modulesByIdentifier.get(t);e&&this.disconnectModule(e)}getContextForElementAndIdentifier(t,e){let i=this.modulesByIdentifier.get(e);if(i)return i.contexts.find(o=>o.element==t)}proposeToConnectScopeForElementAndIdentifier(t,e){let i=this.scopeObserver.parseValueForElementAndIdentifier(t,e);i?this.scopeObserver.elementMatchedValue(i.element,i):console.error(`Couldn't find or create scope for identifier: "${e}" and element:`,t)}handleError(t,e,i){this.application.handleError(t,e,i)}createScopeForElementAndIdentifier(t,e){return new Pi(this.schema,t,e,this.logger)}scopeConnected(t){this.scopesByIdentifier.add(t.identifier,t);let e=this.modulesByIdentifier.get(t.identifier);e&&e.connectContextForScope(t)}scopeDisconnected(t){this.scopesByIdentifier.delete(t.identifier,t);let e=this.modulesByIdentifier.get(t.identifier);e&&e.disconnectContextForScope(t)}connectModule(t){this.modulesByIdentifier.set(t.identifier,t),this.scopesByIdentifier.getValuesForKey(t.identifier).forEach(i=>t.connectContextForScope(i))}disconnectModule(t){this.modulesByIdentifier.delete(t.identifier),this.scopesByIdentifier.getValuesForKey(t.identifier).forEach(i=>t.disconnectContextForScope(i))}},Fr={controllerAttribute:"data-controller",actionAttribute:"data-action",targetAttribute:"data-target",targetAttributeForScope:b=>`data-${b}-target`,outletAttributeForScope:(b,t)=>`data-${b}-${t}-outlet`,keyMappings:Object.assign(Object.assign({enter:"Enter",tab:"Tab",esc:"Escape",space:" ",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",home:"Home",end:"End",page_up:"PageUp",page_down:"PageDown"},oo("abcdefghijklmnopqrstuvwxyz".split("").map(b=>[b,b]))),oo("0123456789".split("").map(b=>[b,b])))};function oo(b){return b.reduce((t,[e,i])=>Object.assign(Object.assign({},t),{[e]:i}),{})}var Ne=class{constructor(t=document.documentElement,e=Fr){this.logger=console,this.debug=!1,this.logDebugActivity=(i,o,a={})=>{this.debug&&this.logFormattedMessage(i,o,a)},this.element=t,this.schema=e,this.dispatcher=new xi(this),this.router=new $i(this),this.actionDescriptorFilters=Object.assign({},qa)}static start(t,e){let i=new this(t,e);return i.start(),i}async start(){await Xr(),this.logDebugActivity("application","starting"),this.dispatcher.start(),this.router.start(),this.logDebugActivity("application","start")}stop(){this.logDebugActivity("application","stopping"),this.dispatcher.stop(),this.router.stop(),this.logDebugActivity("application","stop")}register(t,e){this.load({identifier:t,controllerConstructor:e})}registerActionOption(t,e){this.actionDescriptorFilters[t]=e}load(t,...e){(Array.isArray(t)?t:[t,...e]).forEach(o=>{o.controllerConstructor.shouldLoad&&this.router.loadDefinition(o)})}unload(t,...e){(Array.isArray(t)?t:[t,...e]).forEach(o=>this.router.unloadIdentifier(o))}get controllers(){return this.router.contexts.map(t=>t.controller)}getControllerForElementAndIdentifier(t,e){let i=this.router.getContextForElementAndIdentifier(t,e);return i?i.controller:null}handleError(t,e,i){var o;this.logger.error(`%s

%o

%o`,e,t,i),(o=window.onerror)===null||o===void 0||o.call(window,e,"",0,0,t)}logFormattedMessage(t,e,i={}){i=Object.assign({application:this},i),this.logger.groupCollapsed(`${t} #${e}`),this.logger.log("details:",Object.assign({},i)),this.logger.groupEnd()}};function Xr(){return new Promise(b=>{document.readyState=="loading"?document.addEventListener("DOMContentLoaded",()=>b()):b()})}function yr(b){return Kt(b,"classes").reduce((e,i)=>Object.assign(e,Rr(i)),{})}function Rr(b){return{[`${b}Class`]:{get(){let{classes:t}=this;if(t.has(b))return t.get(b);{let e=t.getAttributeName(b);throw new Error(`Missing attribute "${e}"`)}}},[`${b}Classes`]:{get(){return this.classes.getAll(b)}},[`has${Mt(b)}Class`]:{get(){return this.classes.has(b)}}}}function Ar(b){return Kt(b,"outlets").reduce((e,i)=>Object.assign(e,vr(i)),{})}function ao(b,t,e){return b.application.getControllerForElementAndIdentifier(t,e)}function ro(b,t,e){let i=ao(b,t,e);if(i||(b.application.router.proposeToConnectScopeForElementAndIdentifier(t,e),i=ao(b,t,e),i))return i}function vr(b){let t=Vi(b);return{[`${t}Outlet`]:{get(){let e=this.outlets.find(b),i=this.outlets.getSelectorForOutletName(b);if(e){let o=ro(this,e,b);if(o)return o;throw new Error(`The provided outlet element is missing an outlet controller "${b}" instance for host controller "${this.identifier}"`)}throw new Error(`Missing outlet element "${b}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${i}".`)}},[`${t}Outlets`]:{get(){let e=this.outlets.findAll(b);return e.length>0?e.map(i=>{let o=ro(this,i,b);if(o)return o;console.warn(`The provided outlet element is missing an outlet controller "${b}" instance for host controller "${this.identifier}"`,i)}).filter(i=>i):[]}},[`${t}OutletElement`]:{get(){let e=this.outlets.find(b),i=this.outlets.getSelectorForOutletName(b);if(e)return e;throw new Error(`Missing outlet element "${b}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${i}".`)}},[`${t}OutletElements`]:{get(){return this.outlets.findAll(b)}},[`has${Mt(t)}Outlet`]:{get(){return this.outlets.has(b)}}}}function Yr(b){return Kt(b,"targets").reduce((e,i)=>Object.assign(e,Qr(i)),{})}function Qr(b){return{[`${b}Target`]:{get(){let t=this.targets.find(b);if(t)return t;throw new Error(`Missing target element "${b}" for "${this.identifier}" controller`)}},[`${b}Targets`]:{get(){return this.targets.findAll(b)}},[`has${Mt(b)}Target`]:{get(){return this.targets.has(b)}}}}function xr(b){let t=dr(b,"values"),e={valueDescriptorMap:{get(){return t.reduce((i,o)=>{let a=Io(o,this.identifier),s=this.data.getAttributeNameForKey(a.key);return Object.assign(i,{[s]:a})},{})}}};return t.reduce((i,o)=>Object.assign(i,Vr(o)),e)}function Vr(b,t){let e=Io(b,t),{key:i,name:o,reader:a,writer:s}=e;return{[o]:{get(){let m=this.data.get(i);return m!==null?a(m):e.defaultValue},set(m){m===void 0?this.data.delete(i):this.data.set(i,s(m))}},[`has${Mt(o)}`]:{get(){return this.data.has(i)||e.hasCustomDefaultValue}}}}function Io([b,t],e){return Ur({controller:e,token:b,typeDefinition:t})}function fe(b){switch(b){case Array:return"array";case Boolean:return"boolean";case Number:return"number";case Object:return"object";case String:return"string"}}function Dt(b){switch(typeof b){case"boolean":return"boolean";case"number":return"number";case"string":return"string"}if(Array.isArray(b))return"array";if(Object.prototype.toString.call(b)==="[object Object]")return"object"}function Jr(b){let{controller:t,token:e,typeObject:i}=b,o=eo(i.type),a=eo(i.default),s=o&&a,m=o&&!a,h=!o&&a,F=fe(i.type),v=Dt(b.typeObject.default);if(m)return F;if(h)return v;if(F!==v){let w=t?`${t}.${e}`:e;throw new Error(`The specified default value for the Stimulus Value "${w}" must match the defined type "${F}". The provided default value of "${i.default}" is of type "${v}".`)}if(s)return F}function kr(b){let{controller:t,token:e,typeDefinition:i}=b,a=Jr({controller:t,token:e,typeObject:i}),s=Dt(i),m=fe(i),h=a||s||m;if(h)return h;let F=t?`${t}.${i}`:e;throw new Error(`Unknown value type "${F}" for "${e}" value`)}function Lr(b){let t=fe(b);if(t)return co[t];let e=Ji(b,"default"),i=Ji(b,"type"),o=b;if(e)return o.default;if(i){let{type:a}=o,s=fe(a);if(s)return co[s]}return b}function Ur(b){let{token:t,typeDefinition:e}=b,i=`${go(t)}-value`,o=kr(b);return{type:o,key:i,name:_i(i),get defaultValue(){return Lr(e)},get hasCustomDefaultValue(){return Dt(e)!==void 0},reader:Or[o],writer:lo[o]||lo.default}}var co={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:""},Or={array(b){let t=JSON.parse(b);if(!Array.isArray(t))throw new TypeError(`expected value of type "array" but instead got value "${b}" of type "${Dt(t)}"`);return t},boolean(b){return!(b=="0"||String(b).toLowerCase()=="false")},number(b){return Number(b.replace(/_/g,""))},object(b){let t=JSON.parse(b);if(t===null||typeof t!="object"||Array.isArray(t))throw new TypeError(`expected value of type "object" but instead got value "${b}" of type "${Dt(t)}"`);return t},string(b){return b}},lo={default:Nr,array:so,object:so};function so(b){return JSON.stringify(b)}function Nr(b){return`${b}`}var K=class{constructor(t){this.context=t}static get shouldLoad(){return!0}static afterLoad(t,e){}get application(){return this.context.application}get scope(){return this.context.scope}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get targets(){return this.scope.targets}get outlets(){return this.scope.outlets}get classes(){return this.scope.classes}get data(){return this.scope.data}initialize(){}connect(){}disconnect(){}dispatch(t,{target:e=this.element,detail:i={},prefix:o=this.identifier,bubbles:a=!0,cancelable:s=!0}={}){let m=o?`${o}:${t}`:t,h=new CustomEvent(m,{detail:i,bubbles:a,cancelable:s});return e.dispatchEvent(h),h}};K.blessings=[yr,Yr,xr,Ar];K.targets=[];K.outlets=[];K.values={};function Zo(b,t=null){let e=[];if(b.querySelectorAll("template[shadowrootmode]").forEach(i=>{let o,a=i.parentNode,s=i.getAttribute("shadowrootmode");try{o=a.attachShadow({mode:s}),o.appendChild(i.content),i.remove(),e.push(a)}catch{o=a.shadowRoot}o&&Zo(o).forEach(m=>e.push(m))}),t)e.forEach(i=>t(i));else return e}function tb(b){Zo(b,t=>t.attachedShadowRootCallback?.())}document.documentElement.addEventListener("turbo:load",b=>{tb(b.target)});document.documentElement.addEventListener("turbo:frame-load",b=>{tb(b.target)});document.documentElement.addEventListener("turbo:before-stream-render",async b=>{let t=b.detail.render;b.detail.render=async e=>{await t(e),b.target.targetElements.forEach(i=>{tb(i)})}});var ib={};Yo(ib,{default:()=>eb});var eb=class extends K{connect(){console.log("Hello, Stimulus!",this.element)}};var fr={"./controllers/example_controller.js":ib},Go=fr;console.info("Bridgetown is loaded!");window.Stimulus=Ne.start();Object.entries(Go).forEach(([b,t])=>{if(b.includes("_controller.")||b.includes("-controller.")){let e=b.replace("./controllers/","").replace(/[_-]controller\..*$/,"").replace(/_/g,"-").replace(/\//g,"--");Stimulus.register(e,t.default)}});})();
/*! Bundled license information:

@hotwired/turbo/dist/turbo.es2017-esm.js:
  (*!
  Turbo 8.0.10
  Copyright © 2024 37signals LLC
   *)
*/
//# sourceMappingURL=/msp_static/_bridgetown/static/index.5OAXANDU.js.map
